<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

  <title>OpenStack Docs: Configure remote console access</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<!-- CSS references are in the css.html template -->
    <!-- Bootstrap Core CSS -->
    <link href="_static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Pygments css -->
    <link href="_static/css/native.css" rel="stylesheet">

    <!-- Fonts -->
    <!--<link href="font-awesome.min.css" rel="stylesheet">-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

	<!-- BB: theme style sheets moved here so that theme rules aren't 
	     overridden by awesome rules. Should they go after the scripts below? -->
    <!-- Custom CSS -->
    <link href="_static/css/combined.css" rel="stylesheet">
    <link href="_static/css/styles.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Page-specific CSS -->
  
  
 </head>
 <body>
    <!-- Header -->
        <!-- Header Navigation -->
        <nav class="navbar navbar-default inner" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
             <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
      <span class="sr-only">
      Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      </button>
                <div class="brand-wrapper">
                    <a class="navbar-brand" href="/"></a>
                </div>
                <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling
-->
            <div class="collapse navbar-collapse"
id="bs-example-navbar-collapse-1">
                <div class="search-container tiny">



  <div id="gcse">
    <script type="text/javascript">
      (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search gname="standard"></gcse:search>
  </div>


                    <i class="fa fa-times close-search"></i>
                </div>
                    <ul class="nav navbar-nav navbar-main show">
                        <li>



  <div id="gcse-mobile">
    <gcse:search gname="mobile"></gcse:search>
  </div>


                        </li>


                        <li>

                                <a href="http://www.openstack.org/software/" class="drop"
id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuSoftware">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-compute/">Compute</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-storage/">Storage</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-networking/">Networking</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-dashboard/">Dashboard</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-shared-services/">Shared Services</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get
Started</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/user-stories/" class="drop"
id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuUsers">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//superuser.openstack.org/">Superuser
Magazine</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/enterprise/auto/">Featured:  Top 10
Automaker</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/community/" class="drop"
id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuCommunity">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//ask.openstack.org/">Ask A Technical
Question</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Main_Page">OpenStack Wiki</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Community Events</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Getting_The_Code">Source Code</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/foundation/companies/">Supporting Companies</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/jobs/">Jobs</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/join/">Join The
Community</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/marketplace/">Marketplace</a>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/events/" class="drop"
id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuEvents">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Overview</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/summit/openstack-paris-summit-2014/">The OpenStack
Summit</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More
OpenStack Events</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/blog/">Blog</a>

                        </li>

                        <li>

                                <a href="http://docs.openstack.org/">Docs</a>

                        </li>


                        <li>
                            <a href="http://openstack.org/Security/login/"
class="sign-in-btn">Sign In</a>
                        </li>
                    </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Begin Page Content -->
        <div class="container docs-book-wrapper">
        <div class="row">
            <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<!-- Row with title and buttons-->
            <div class="row">
                <div class="col-lg-8">
                <h2>Configure remote console access</h2>
                </div>
<div class="docs-actions">
                  
                  <a href="compute-live-migration-usage.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Migrate instances"></i></a>
                  
                  
                  <a href="compute-service-groups.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configure Compute service groups"></i></a>
                  
                  <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
            </div>
            <div class="row docs-byline">
                <div class="docs-updated">
                    updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="docs-top-contents">
                    <h5>Contents</h5>
                    <ul>
<li><a class="reference internal" href="#">Configure remote console access</a><ul>
<li><a class="reference internal" href="#spice-console">SPICE console</a></li>
<li><a class="reference internal" href="#vnc-console-proxy">VNC console proxy</a><ul>
<li><a class="reference internal" href="#about-nova-consoleauth">About nova-consoleauth</a></li>
<li><a class="reference internal" href="#typical-deployment">Typical deployment</a></li>
<li><a class="reference internal" href="#vnc-configuration-options">VNC configuration options</a></li>
<li><a class="reference internal" href="#nova-novncproxy-novnc">nova-novncproxy (noVNC)</a></li>
<li><a class="reference internal" href="#frequently-asked-questions-about-vnc-access-to-virtual-machines">Frequently asked questions about VNC access to virtual machines</a></li>
</ul>
</li>
</ul>
</li>
</ul>

                    </div>
                <div class="docs-body">

  <div class="section" id="configure-remote-console-access">
<h1>Configure remote console access<a class="headerlink" href="#configure-remote-console-access" title="Permalink to this headline">¶</a></h1>
<p>To provide a remote console or remote desktop access to guest virtual
machines, use VNC or SPICE HTML5 through either the OpenStack dashboard
or the command line. Best practice is to select one or the other to run.</p>
<div class="section" id="spice-console">
<h2>SPICE console<a class="headerlink" href="#spice-console" title="Permalink to this headline">¶</a></h2>
<p>OpenStack Compute supports VNC consoles to guests. The VNC protocol is
fairly limited, lacking support for multiple monitors, bi-directional
audio, reliable cut-and-paste, video streaming and more. SPICE is a new
protocol that aims to address the limitations in VNC and provide good
remote desktop support.</p>
<p>SPICE support in OpenStack Compute shares a similar architecture to the
VNC implementation. The OpenStack dashboard uses a SPICE-HTML5 widget in
its console tab that communicates to the <tt class="docutils literal"><span class="pre">nova-spicehtml5proxy</span></tt> service by
using SPICE-over-websockets. The <tt class="docutils literal"><span class="pre">nova-spicehtml5proxy</span></tt> service
communicates directly with the hypervisor process by using SPICE.</p>
<p>VNC must be explicitly disabled to get access to the SPICE console. Set
the <tt class="docutils literal"><span class="pre">vnc_enabled</span></tt> option to <tt class="docutils literal"><span class="pre">False</span></tt> in the <tt class="docutils literal"><span class="pre">[DEFAULT]</span></tt> section to
disable the VNC console.</p>
<p>Use the following options to configure SPICE as the console for
OpenStack Compute:</p>
<table border="1" class="docutils">
<caption><strong>Description of SPICE configuration options</strong></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Spice configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">agent_enabled</span> <span class="pre">=</span> <span class="pre">True</span></tt></td>
<td>(BoolOpt) Enable spice guest agent support</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">enabled</span> <span class="pre">=</span> <span class="pre">False</span></tt></td>
<td>(BoolOpt) Enable spice related features</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">html5proxy_base_url</span> <span class="pre">=</span> <span class="pre">http://127.0.0.1:6082/spice_auto.html</span></tt></td>
<td>(StrOpt) Location of spice HTML5 console proxy, in the form
&#8220;<a class="reference external" href="http://127.0.0.1:6082/spice_auto.html">http://127.0.0.1:6082/spice_auto.html</a>&#8220;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">html5proxy_host</span> <span class="pre">=</span> <span class="pre">0.0.0.0</span></tt></td>
<td>(StrOpt) Host on which to listen for incoming requests</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">html5proxy_port</span> <span class="pre">=</span> <span class="pre">6082</span></tt></td>
<td>(IntOpt) Port on which to listen for incoming requests</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">keymap</span> <span class="pre">=</span> <span class="pre">en-us</span></tt></td>
<td>(StrOpt) Keymap for spice</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">server_listen</span> <span class="pre">=</span> <span class="pre">127.0.0.1</span></tt></td>
<td>(StrOpt) IP address on which instance spice server should listen</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">server_proxyclient_address</span> <span class="pre">=</span> <span class="pre">127.0.0.1</span></tt></td>
<td>(StrOpt) The address to which proxy clients (like nova-spicehtml5proxy)
should connect</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="vnc-console-proxy">
<h2>VNC console proxy<a class="headerlink" href="#vnc-console-proxy" title="Permalink to this headline">¶</a></h2>
<p>The VNC proxy is an OpenStack component that enables compute service
users to access their instances through VNC clients.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The web proxy console URLs do not support the websocket protocol
scheme (ws://) on python versions less than 2.7.4.</p>
</div>
<p>The VNC console connection works as follows:</p>
<ol class="arabic">
<li><p class="first">A user connects to the API and gets an <tt class="docutils literal"><span class="pre">access_url</span></tt> such as,
<tt class="docutils literal"><span class="pre">http://ip:port/?token=xyz</span></tt>.</p>
</li>
<li><p class="first">The user pastes the URL in a browser or uses it as a client
parameter.</p>
</li>
<li><p class="first">The browser or client connects to the proxy.</p>
</li>
<li><p class="first">The proxy talks to <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt> to authorize the token for the
user, and maps the token to the <em>private</em> host and port of the VNC
server for an instance.</p>
<p>The compute host specifies the address that the proxy should use to
connect through the <tt class="file docutils literal"><span class="pre">nova.conf</span></tt> file option,
<tt class="docutils literal"><span class="pre">vncserver_proxyclient_address</span></tt>. In this way, the VNC proxy works
as a bridge between the public network and private host network.</p>
</li>
<li><p class="first">The proxy initiates the connection to VNC server and continues to
proxy until the session ends.</p>
</li>
</ol>
<p>The proxy also tunnels the VNC protocol over WebSockets so that the
<tt class="docutils literal"><span class="pre">noVNC</span></tt> client can talk to VNC servers. In general, the VNC proxy:</p>
<ul class="simple">
<li>Bridges between the public network where the clients live and the
private network where VNC servers live.</li>
<li>Mediates token authentication.</li>
<li>Transparently deals with hypervisor-specific connection details to
provide a uniform client experience.</li>
</ul>
<div class="figure">
<a class="reference internal image-reference" href="_images/SCH_5009_V00_NUAC-VNC_OpenStack.png"><img alt="noVNC process" src="_images/SCH_5009_V00_NUAC-VNC_OpenStack.png" style="width: 95%;" /></a>
</div>
<div class="section" id="about-nova-consoleauth">
<h3>About nova-consoleauth<a class="headerlink" href="#about-nova-consoleauth" title="Permalink to this headline">¶</a></h3>
<p>Both client proxies leverage a shared service to manage token
authentication called <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt>. This service must be running for
either proxy to work. Many proxies of either type can be run against a
single <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt> service in a cluster configuration.</p>
<p>Do not confuse the <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt> shared service with
<tt class="docutils literal"><span class="pre">nova-console</span></tt>, which is a XenAPI-specific service that most recent
VNC proxy architectures do not use.</p>
</div>
<div class="section" id="typical-deployment">
<h3>Typical deployment<a class="headerlink" href="#typical-deployment" title="Permalink to this headline">¶</a></h3>
<p>A typical deployment has the following components:</p>
<ul class="simple">
<li>A <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt> process. Typically runs on the controller host.</li>
<li>One or more <tt class="docutils literal"><span class="pre">nova-novncproxy</span></tt> services. Supports browser-based noVNC
clients. For simple deployments, this service typically runs on the
same machine as <tt class="docutils literal"><span class="pre">nova-api</span></tt> because it operates as a proxy between the
public network and the private compute host network.</li>
<li>One or more <tt class="docutils literal"><span class="pre">nova-xvpvncproxy</span></tt> services. Supports the special Java
client discussed here. For simple deployments, this service typically
runs on the same machine as <tt class="docutils literal"><span class="pre">nova-api</span></tt> because it acts as a proxy
between the public network and the private compute host network.</li>
<li>One or more compute hosts. These compute hosts must have correctly
configured options, as follows.</li>
</ul>
</div>
<div class="section" id="vnc-configuration-options">
<h3>VNC configuration options<a class="headerlink" href="#vnc-configuration-options" title="Permalink to this headline">¶</a></h3>
<p>To customize the VNC console, use the following configuration options in
your <tt class="file docutils literal"><span class="pre">nova.conf</span></tt>:</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To support <a class="reference internal" href="compute-configuring-migrations.html#section-configuring-compute-migrations"><em>live migration</em></a>,
you cannot specify a specific IP address for <tt class="docutils literal"><span class="pre">vncserver_listen</span></tt>,
because that IP address does not exist on the destination host.</p>
</div>
<table border="1" class="docutils">
<caption><strong>Description of VNC configuration options</strong></caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Configuration option = Default value</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><strong>[DEFAULT]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">daemon</span> <span class="pre">=</span> <span class="pre">False</span></tt></td>
<td>(BoolOpt) Become a daemon (background process)</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">key</span> <span class="pre">=</span> <span class="pre">None</span></tt></td>
<td>(StrOpt) SSL key file (if separate from cert)</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">novncproxy_host</span> <span class="pre">=</span> <span class="pre">0.0.0.0</span></tt></td>
<td>(StrOpt) Host on which to listen for incoming requests</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">novncproxy_port</span> <span class="pre">=</span> <span class="pre">6080</span></tt></td>
<td>(IntOpt) Port on which to listen for incoming requests</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">record</span> <span class="pre">=</span> <span class="pre">False</span></tt></td>
<td>(BoolOpt) Record sessions to FILE.[session_number]</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">source_is_ipv6</span> <span class="pre">=</span> <span class="pre">False</span></tt></td>
<td>(BoolOpt) Source is ipv6</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">ssl_only</span> <span class="pre">=</span> <span class="pre">False</span></tt></td>
<td>(BoolOpt) Disallow non-encrypted connections</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">web</span> <span class="pre">=</span> <span class="pre">/usr/share/spice-html5</span></tt></td>
<td>(StrOpt) Run webserver on same port. Serve files from DIR.</td>
</tr>
<tr class="row-odd"><td><strong>[vmware]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">vnc_port</span> <span class="pre">=</span> <span class="pre">5900</span></tt></td>
<td>(IntOpt) VNC starting port</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">vnc_port_total</span> <span class="pre">=</span> <span class="pre">10000</span></tt></td>
<td>vnc_port_total = 10000</td>
</tr>
<tr class="row-even"><td><strong>[vnc]</strong></td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>enabled = True</td>
<td>(BoolOpt) Enable VNC related features</td>
</tr>
<tr class="row-even"><td>novncproxy_base_url = <a class="reference external" href="http://127.0.0.1:6080/vnc_auto.html">http://127.0.0.1:6080/vnc_auto.html</a></td>
<td>(StrOpt) Location of VNC console proxy, in the form
&#8220;<a class="reference external" href="http://127.0.0.1:6080/vnc_auto.html">http://127.0.0.1:6080/vnc_auto.html</a>&#8220;</td>
</tr>
<tr class="row-odd"><td>vncserver_listen = 127.0.0.1</td>
<td>(StrOpt) IP address on which instance vncservers should listen</td>
</tr>
<tr class="row-even"><td>vncserver_proxyclient_address = 127.0.0.1</td>
<td>(StrOpt) The address to which proxy clients (like nova-xvpvncproxy)
should connect</td>
</tr>
<tr class="row-odd"><td>xvpvncproxy_base_url = <a class="reference external" href="http://127.0.0.1:6081/console">http://127.0.0.1:6081/console</a></td>
<td>(StrOpt) Location of nova xvp VNC console proxy, in the form
&#8220;<a class="reference external" href="http://127.0.0.1:6081/console">http://127.0.0.1:6081/console</a>&#8220;</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>The <tt class="docutils literal"><span class="pre">vncserver_proxyclient_address</span></tt> defaults to <tt class="docutils literal"><span class="pre">127.0.0.1</span></tt>,
which is the address of the compute host that Compute instructs
proxies to use when connecting to instance servers.</li>
<li>For all-in-one XenServer domU deployments, set this to
<tt class="docutils literal"><span class="pre">169.254.0.1.</span></tt></li>
<li>For multi-host XenServer domU deployments, set to a <tt class="docutils literal"><span class="pre">dom0</span>
<span class="pre">management</span> <span class="pre">IP</span></tt> on the same network as the proxies.</li>
<li>For multi-host libvirt deployments, set to a host management IP
on the same network as the proxies.</li>
</ul>
</div>
</div>
<div class="section" id="nova-novncproxy-novnc">
<h3>nova-novncproxy (noVNC)<a class="headerlink" href="#nova-novncproxy-novnc" title="Permalink to this headline">¶</a></h3>
<p>You must install the noVNC package, which contains the <tt class="docutils literal"><span class="pre">nova-novncproxy</span></tt>
service. As root, run the following command:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> apt-get install nova-novncproxy
</pre></div>
</div>
<p>The service starts automatically on installation.</p>
<p>To restart the service, run:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> service nova-novncproxy restart
</pre></div>
</div>
<p>The configuration option parameter should point to your <tt class="file docutils literal"><span class="pre">nova.conf</span></tt>
file, which includes the message queue server address and credentials.</p>
<p>By default, <tt class="docutils literal"><span class="pre">nova-novncproxy</span></tt> binds on <tt class="docutils literal"><span class="pre">0.0.0.0:6080</span></tt>.</p>
<p>To connect the service to your Compute deployment, add the following
configuration options to your <tt class="file docutils literal"><span class="pre">nova.conf</span></tt>:</p>
<ul>
<li><p class="first"><tt class="docutils literal"><span class="pre">vncserver_listen=0.0.0.0</span></tt></p>
<p>Specifies the address on which the VNC service should bind. Make sure
it is assigned one of the compute node interfaces. This address is
the one used by your domain file.</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;graphics type=&quot;vnc&quot; autoport=&quot;yes&quot; keymap=&quot;en-us&quot; listen=&quot;0.0.0.0&quot;/&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">To use live migration, use the 0.0.0.0 address.</p>
</div>
</li>
<li><p class="first"><tt class="docutils literal"><span class="pre">vncserver_proxyclient_address=127.0.0.1</span></tt></p>
<p>The address of the compute host that Compute instructs proxies to use
when connecting to instance <tt class="docutils literal"><span class="pre">vncservers</span></tt>.</p>
</li>
</ul>
</div>
<div class="section" id="frequently-asked-questions-about-vnc-access-to-virtual-machines">
<h3>Frequently asked questions about VNC access to virtual machines<a class="headerlink" href="#frequently-asked-questions-about-vnc-access-to-virtual-machines" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p class="first"><strong>Q: What is the difference between ``nova-xvpvncproxy`` and
``nova-novncproxy``?</strong></p>
<p>A: <tt class="docutils literal"><span class="pre">nova-xvpvncproxy</span></tt>, which ships with OpenStack Compute, is a
proxy that supports a simple Java client. nova-novncproxy uses noVNC
to provide VNC support through a web browser.</p>
</li>
<li><p class="first"><strong>Q: I want VNC support in the OpenStack dashboard. What services do
I need?</strong></p>
<p>A: You need <tt class="docutils literal"><span class="pre">nova-novncproxy</span></tt>, <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt>, and correctly
configured compute hosts.</p>
</li>
<li><p class="first"><strong>Q: When I use ``nova get-vnc-console`` or click on the VNC tab of
the OpenStack dashboard, it hangs. Why?</strong></p>
<p>A: Make sure you are running <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt> (in addition to
<tt class="docutils literal"><span class="pre">nova-novncproxy</span></tt>). The proxies rely on <tt class="docutils literal"><span class="pre">nova-consoleauth</span></tt> to validate
tokens, and waits for a reply from them until a timeout is reached.</p>
</li>
<li><p class="first"><strong>Q: My VNC proxy worked fine during my all-in-one test, but now it
doesn&#8217;t work on multi host. Why?</strong></p>
<p>A: The default options work for an all-in-one install, but changes
must be made on your compute hosts once you start to build a cluster.
As an example, suppose you have two servers:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>PROXYSERVER (public_ip=172.24.1.1, management_ip=192.168.1.1)
COMPUTESERVER (management_ip=192.168.1.2)
</pre></div>
</div>
<p>Your <tt class="file docutils literal"><span class="pre">nova-compute</span></tt> configuration file must set the following values:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="gp">#</span> These flags <span class="nb">help </span>construct a connection data structure
<span class="go">vncserver_proxyclient_address=192.168.1.2</span>
<span class="go">novncproxy_base_url=http://172.24.1.1:6080/vnc_auto.html</span>
<span class="go">xvpvncproxy_base_url=http://172.24.1.1:6081/console</span>

<span class="gp">#</span> This is the address where the underlying vncserver <span class="o">(</span>not the proxy<span class="o">)</span>
<span class="gp">#</span> will listen <span class="k">for</span> connections.
<span class="go">vncserver_listen=192.168.1.2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><tt class="docutils literal"><span class="pre">novncproxy_base_url</span></tt> and <tt class="docutils literal"><span class="pre">xvpvncproxy_base_url</span></tt> use a public
IP; this is the URL that is ultimately returned to clients, which
generally do not have access to your private network. Your
PROXYSERVER must be able to reach <tt class="docutils literal"><span class="pre">vncserver_proxyclient_address</span></tt>,
because that is the address over which the VNC connection is proxied.</p>
</div>
</li>
<li><p class="first"><strong>Q: My noVNC does not work with recent versions of web browsers. Why?</strong></p>
<p>A: Make sure you have installed <tt class="docutils literal"><span class="pre">python-numpy</span></tt>, which is required
to support a newer version of the WebSocket protocol (HyBi-07+).</p>
</li>
<li><p class="first"><strong>Q: How do I adjust the dimensions of the VNC window image in the
OpenStack dashboard?</strong></p>
<p>A: These values are hard-coded in a Django HTML template. To alter
them, edit the <tt class="file docutils literal"><span class="pre">_detail_vnc.html</span></tt> template file. The location of
this file varies based on Linux distribution. On Ubuntu 14.04, the
file is at
<tt class="docutils literal"><span class="pre">/usr/share/pyshared/horizon/dashboards/nova/instances/templates/instances/_detail_vnc.html</span></tt>.</p>
<p>Modify the <tt class="docutils literal"><span class="pre">width</span></tt> and <tt class="docutils literal"><span class="pre">height</span></tt> options, as follows:</p>
<div class="highlight-console"><div class="highlight"><pre><span class="go">&lt;iframe src=&quot;{{ vnc_url }}&quot; width=&quot;720&quot; height=&quot;430&quot;&gt;&lt;/iframe&gt;</span>
</pre></div>
</div>
</li>
<li><p class="first"><strong>Q: My noVNC connections failed with ValidationError: Origin header
protocol does not match. Why?</strong></p>
<p>A: Make sure the <tt class="docutils literal"><span class="pre">base_url</span></tt> match your TLS setting. If you are
using https console connections, make sure that the value of
<tt class="docutils literal"><span class="pre">novncproxy_base_url</span></tt> is set explicitly where the <tt class="docutils literal"><span class="pre">nova-novncproxy</span></tt>
service is running.</p>
</li>
</ul>
</div>
</div>
</div>


              </div>
          </div>
          </div>
          <!-- <div class="docs-tags">
                <a href="#" class="docs-tag">Network Time Protocol (NTP)</a>
                <a href="#" class="docs-tag">Security</a>
                <a href="#" class="docs-tag">Conceptual architecture</a>
            </div> -->
<div class="docs-actions">
                  
                  <a href="compute-live-migration-usage.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Migrate instances"></i></a>
                  
                  
                  <a href="compute-service-groups.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Configure Compute service groups"></i></a>
                  
                  <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
                <div class="row docs-byline bottom">
                <div class="docs-updated">
                updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
</div>
    <div class="row">
         <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
           <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
<p>
 Except where otherwise noted, this document is licensed under Creative Commons
 Attribution 3.0 License
 <a href="#">http://creativecommons.org/licenses/by/3.0/legalcode</a>.
</p>
<p>
 <a href="http://www.openstack.org/legal">See All Legal Notices</a>
</p>
         </div>
         <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
                    <!-- ID buglinkbottom added so that pre-filled doc bugs
                    are sent to Launchpad projects related to the document -->
                    <a href="#" id="logABugLink2" class="docs-footer-actions">
                        <i class="fa fa-bug"></i>found an error? report a bug
                    </a>
                    <a href="http://ask.openstack.org" class="docs-footer-actions">
                        <i class="fa fa-question-circle"></i>questions? <a href="http://ask.openstack.org/">ask.openstack.org</a>
                    </a>
                </div>
     </div>
     </div>
            <!-- Docs Sidebar -->
                <div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
            <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            <div class="btn-group docs-sidebar-releases">
                <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
                <button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">Release: Kilo (April 2015)<i class="fa fa-caret-down"></i></button>
                <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
                    <li role="presentation" class="dropdown-header">Releases</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/kilo/">Kilo (current release)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/juno/">Juno (October 2014)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/icehouse/">Icehouse (May 2014)</a></li>
                    <li role="presentation" class="dropdown-header">Languages</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ja/">日本語 (Japanese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/de/">Deutsch (German)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/fr/">Français (French)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/pt_BR/">Português (Portuguese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/zh_CN/">简体中文 (Simplified Chinese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ko_KR/">한국어 (Korean)</a></li>
                </ul>
            </div>
                <div class="docs-sidebar-toc">
                    <div class="docs-sidebar-section" id="install-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#install-guides"><h4>Install Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="user-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#user-guides"><h4>User Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="configuration-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#configuration-guides"><h4>Configuration Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="operations-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/openstack-ops/content/"><h4>Operations Guide</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="api-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#api-guides"><h4>API Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="contributor-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#contributor-guides"><h4>Contributor Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="table-of-contents">
                        <a class="docs-sidebar-section-title"><h4>Contents</h4></a>
                        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get_started_with_openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity_management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="compute.html">Compute</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="compute_arch.html">System architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute-images-instances.html">Images and instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute-networking-nova.html">Networking with nova-network</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="compute-system-admin.html">System administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/support-compute.html">Troubleshoot Compute</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_file_systems.html">Shared File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross_project.html">Cross-project features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app_support.html">Community support</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

                    </div>
                </div>
                </div>

</div>
</div>
    <!-- End Page Content -->

    <!-- Footer -->
    <!-- Footer -->
        <footer>
        <div class="container">
            <div class="row footer-links">
                <div class="col-lg-2 col-sm-2">
                    <h3>OpenStack</h3>
                    <ul>
                        <li><a href="/foundation">About the Foundation</a></li>
                        <li><a
href="http://openstack.org/projects/">Projects</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-security/">OpenStack
Security</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
                        <li><a href="http://openstack.org/blog/">Blog</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Community</h3>
                    <ul>
                        <li><a href="http://openstack.org/community/">User
Groups</a></li>
                        <li><a
href="http://openstack.org/community/events/">Events</a></li>
                        <li><a
href="http://openstack.org/community/jobs/">Jobs</a></li>
                        <li><a
href="http://openstack.org/foundation/companies/">Companies</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute">Contribute</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Documentation</h3>
                    <ul>
                        <li><a href="http://docs.openstack.org">OpenStack
Manuals</a></li>
                        <li><a
href="http://openstack.org/software/start/">Getting Started</a></li>
                        <li><a href="http://developer.openstack.org">API
Documentation</a></li>
                        <li><a href="https://wiki.openstack.org">Wiki</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Branding & Legal</h3>
                    <ul>
                        <li><a href="http://openstack.org/brand/">Logos &
Guidelines</a></li>
                        <li><a
href="http://openstack.org/brand/openstack-trademark-policy/">Trademark
Policy</a></li>
                        <li><a href="http://openstack.org/privacy/">Privacy
Policy</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributors_License_Agreement">OpenStack
CLA</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-sm-4">
                    <h3>Stay In Touch</h3>
                    <a href="https://twitter.com/OpenStack" target="_blank"
class="social-icons footer-twitter"></a>
                    <a href="https://www.facebook.com/openstack"
target="_blank" class="social-icons footer-facebook"></a>
                    <a href="https://www.linkedin.com/company/openstack"
target="_blank" class="social-icons footer-linkedin"></a>
                    <a href="https://www.youtube.com/user/OpenStackFoundation"
target="_blank" class="social-icons footer-youtube"></a>
                    <!-- <form class="form-inline">
                        <div class="form-group newsletter-form">
                            <label>Join Our Newsletter</label>
                            <input class="newsletter-input" type="input"
placeholder="Email">
                            <button type="submit"
class="newsletter-btn">Join</button>
                        </div>
                    </form> -->
                    <p class="fine-print">
                        The OpenStack project is provided under the Apache 2.0
license. Openstack.org is powered by <a href="http://rackspace.com"
target="_blank">Rackspace Cloud Computing</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <div class="footer-bottom">
        <div class="container">
            <form class="form-inline" id="FeedbackForm_FeedbackForm" action="/home/FeedbackForm" method="post" enctype="application/x-www-form-urlencoded">
              <div class="form-group">
                <div>
                  <input class="feedback-input" type="input" placeholder="Give Us Your Feedback On This Page">
                  <button type="submit" class="feedback-btn">Submit</button>
                </div>
              </div>
            </form>
        </div>
    </div>

<!-- Scripts in: static directory-->
    <!-- jQuery Version 1.11.0 -->
    <script type="text/javascript" src="_static/js/jquery-1.11.3.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

    <!-- The rest of the JS -->
    <script type="text/javascript" src="_static/js/navigation.js"></script>

    <!-- Docs JS -->
    <script type="text/javascript" src="_static/js/docs.js"></script>

    <!-- Popovers -->
    <script type="text/javascript" src="_static/js/webui-popover.js"></script>

    <!-- Javascript for page -->
    <script language="JavaScript">
    /* build a description of this page including SHA, source location on git repo and
       build time, the project's launchpad bug tag and set the HREF of the bug buttons */

        var lineFeed = "%0A";

        /* gitsha, project and bug_tag rely on variables in conf.py */
        var gitSha = "SHA: f7a37b8ab67b5fbe8597432774a12df3186c2e65"
        var bugTitle = "Configure remote console access in Cloud Administrator Guide"
        var fieldTags = "admin-guide-cloud"

        /* "last_updated" is the build date and time. It relies on the
           conf.py variable "html_last_updated_fmt", which should include
           year/month/day as well as hours and minutes                   */
        var buildstring = "Release: 0.9 on 2015-10-23 15:47"

        var fieldComment = encodeURI(buildstring) +
                           lineFeed + encodeURI(gitSha) +
                           lineFeed + encodeURI(gitlink)

        logABug(bugTitle, fieldComment, fieldTags)
    </script>
    <!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
        (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
       </script>

 </body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

  <title>OpenStack Docs: Configure Identity service for Networking</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<!-- CSS references are in the css.html template -->
    <!-- Bootstrap Core CSS -->
    <link href="_static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Pygments css -->
    <link href="_static/css/native.css" rel="stylesheet">

    <!-- Fonts -->
    <!--<link href="font-awesome.min.css" rel="stylesheet">-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

	<!-- BB: theme style sheets moved here so that theme rules aren't 
	     overridden by awesome rules. Should they go after the scripts below? -->
    <!-- Custom CSS -->
    <link href="_static/css/combined.css" rel="stylesheet">
    <link href="_static/css/styles.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Page-specific CSS -->
  
  
 </head>
 <body>
    <!-- Header -->
        <!-- Header Navigation -->
        <nav class="navbar navbar-default inner" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
             <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
      <span class="sr-only">
      Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      </button>
                <div class="brand-wrapper">
                    <a class="navbar-brand" href="/"></a>
                </div>
                <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling
-->
            <div class="collapse navbar-collapse"
id="bs-example-navbar-collapse-1">
                <div class="search-container tiny">



  <div id="gcse">
    <script type="text/javascript">
      (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search gname="standard"></gcse:search>
  </div>


                    <i class="fa fa-times close-search"></i>
                </div>
                    <ul class="nav navbar-nav navbar-main show">
                        <li>



  <div id="gcse-mobile">
    <gcse:search gname="mobile"></gcse:search>
  </div>


                        </li>


                        <li>

                                <a href="http://www.openstack.org/software/" class="drop"
id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuSoftware">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-compute/">Compute</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-storage/">Storage</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-networking/">Networking</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-dashboard/">Dashboard</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-shared-services/">Shared Services</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get
Started</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/user-stories/" class="drop"
id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuUsers">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//superuser.openstack.org/">Superuser
Magazine</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/enterprise/auto/">Featured:  Top 10
Automaker</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/community/" class="drop"
id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuCommunity">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//ask.openstack.org/">Ask A Technical
Question</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Main_Page">OpenStack Wiki</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Community Events</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Getting_The_Code">Source Code</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/foundation/companies/">Supporting Companies</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/jobs/">Jobs</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/join/">Join The
Community</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/marketplace/">Marketplace</a>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/events/" class="drop"
id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuEvents">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Overview</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/summit/openstack-paris-summit-2014/">The OpenStack
Summit</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More
OpenStack Events</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/blog/">Blog</a>

                        </li>

                        <li>

                                <a href="http://docs.openstack.org/">Docs</a>

                        </li>


                        <li>
                            <a href="http://openstack.org/Security/login/"
class="sign-in-btn">Sign In</a>
                        </li>
                    </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Begin Page Content -->
        <div class="container docs-book-wrapper">
        <div class="row">
            <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<!-- Row with title and buttons-->
            <div class="row">
                <div class="col-lg-8">
                <h2>Configure Identity service for Networking</h2>
                </div>
<div class="docs-actions">
                  
                  <a href="networking_arch.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Networking architecture"></i></a>
                  
                  
                  <a href="networking_adv-config.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Advanced configuration options"></i></a>
                  
                  <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
            </div>
            <div class="row docs-byline">
                <div class="docs-updated">
                    updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="docs-top-contents">
                    <h5>Contents</h5>
                    <ul>
<li><a class="reference internal" href="#">Configure Identity service for Networking</a><ul>
<li><a class="reference internal" href="#compute">Compute</a></li>
<li><a class="reference internal" href="#networking-api-and-credential-configuration">Networking API and credential configuration</a></li>
<li><a class="reference internal" href="#configure-security-groups">Configure security groups</a></li>
<li><a class="reference internal" href="#configure-metadata">Configure metadata</a></li>
<li><a class="reference internal" href="#example-nova-conf-for-nova-compute-and-nova-api">Example nova.conf (for nova-compute and nova-api)</a></li>
</ul>
</li>
</ul>

                    </div>
                <div class="docs-body">

  <div class="section" id="configure-identity-service-for-networking">
<h1>Configure Identity service for Networking<a class="headerlink" href="#configure-identity-service-for-networking" title="Permalink to this headline">¶</a></h1>
<p><strong>To configure the Identity service for use with Networking</strong></p>
<ol class="arabic">
<li><p class="first">Create the <tt class="docutils literal"><span class="pre">get_id()</span></tt> function</p>
<p>The <tt class="docutils literal"><span class="pre">get_id()</span></tt> function stores the ID of created objects, and removes
the need to copy and paste object IDs in later steps:</p>
<ol class="loweralpha">
<li><p class="first">Add the following function to your <tt class="file docutils literal"><span class="pre">.bashrc</span></tt> file:</p>
<div class="code ini highlight-python"><div class="highlight"><pre>function get_id () {
echo `&quot;$@&quot; | awk &#39;/ id / { print $4 }&#39;`
}
</pre></div>
</div>
</li>
<li><p class="first">Source the <tt class="file docutils literal"><span class="pre">.bashrc</span></tt> file:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ source .bashrc
</pre></div>
</div>
</li>
</ol>
</li>
<li><p class="first">Create the Networking service entry</p>
<p>Networking must be available in the Compute service catalog. Create the
service:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ NEUTRON_SERVICE_ID=$(get_id keystone service-create --name
neutron --type network --description &#39;OpenStack Networking Service&#39;)
</pre></div>
</div>
</li>
<li><p class="first">Create the Networking service endpoint entry</p>
<p>The way that you create a Networking endpoint entry depends on whether
you are using the SQL or the template catalog driver:</p>
<ul>
<li><p class="first">If you are using the <em>SQL driver</em>, run the following command with the
specified region (<tt class="docutils literal"><span class="pre">$REGION</span></tt>), IP address of the Networking server
(<tt class="docutils literal"><span class="pre">$IP</span></tt>), and service ID (<tt class="docutils literal"><span class="pre">$NEUTRON_SERVICE_ID</span></tt>, obtained in the
previous step).</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ keystone endpoint-create --region $REGION --service-id
  $NEUTRON_SERVICE_ID \
 --publicurl &#39;http://$IP:9696/&#39; --adminurl &#39;http://$IP:9696/&#39;
 --internalurl &#39;http://$IP:9696/&#39;
</pre></div>
</div>
<p>For example:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ keystone endpoint-create --region myregion --service-id
  $NEUTRON_SERVICE_ID \
 --publicurl &quot;http://10.211.55.17:9696/&quot; --adminurl
 &quot;http://10.211.55.17:9696/&quot; --internalurl
 &quot;http://10.211.55.17:9696/&quot;
</pre></div>
</div>
</li>
<li><p class="first">If you are using the <em>template driver</em>, specify the following
parameters in your Compute catalog template file
(<tt class="file docutils literal"><span class="pre">default_catalog.templates</span></tt>), along with the region (<tt class="docutils literal"><span class="pre">$REGION</span></tt>)
and IP address of the Networking server (<tt class="docutils literal"><span class="pre">$IP</span></tt>).</p>
<div class="code bash highlight-python"><div class="highlight"><pre>catalog.$REGION.network.publicURL = http://$IP:9696
catalog.$REGION.network.adminURL = http://$IP:9696
catalog.$REGION.network.internalURL = http://$IP:9696
catalog.$REGION.network.name = Network Service
</pre></div>
</div>
<p>For example:</p>
<div class="code bash highlight-python"><div class="highlight"><pre>catalog.$Region.network.publicURL = http://10.211.55.17:9696
catalog.$Region.network.adminURL = http://10.211.55.17:9696
catalog.$Region.network.internalURL = http://10.211.55.17:9696
catalog.$Region.network.name = Network Service
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Create the Networking service user</p>
<p>You must provide admin user credentials that Compute and some internal
Networking components can use to access the Networking API. Create a
special <tt class="docutils literal"><span class="pre">service</span></tt> tenant and a <tt class="docutils literal"><span class="pre">neutron</span></tt> user within this tenant,
and assign an <tt class="docutils literal"><span class="pre">admin</span></tt> role to this role.</p>
<ol class="loweralpha">
<li><p class="first">Create the <tt class="docutils literal"><span class="pre">admin</span></tt> role:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ ADMIN_ROLE=$(get_id keystone role-create --name admin)
</pre></div>
</div>
</li>
<li><p class="first">Create the <tt class="docutils literal"><span class="pre">neutron</span></tt> user:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ NEUTRON_USER=$(get_id keystone user-create --name neutron\
--pass &quot;$NEUTRON_PASSWORD&quot; --email demo@example.com --tenant-id service)
</pre></div>
</div>
</li>
<li><p class="first">Create the <tt class="docutils literal"><span class="pre">service</span></tt> tenant:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ SERVICE_TENANT=$(get_id keystone tenant-create --name
service --description &quot;Services Tenant&quot;)
</pre></div>
</div>
</li>
<li><p class="first">Establish the relationship among the tenant, user, and role:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ keystone user-role-add --user_id $NEUTRON_USER
--role_id $ADMIN_ROLE --tenant_id $SERVICE_TENANT
</pre></div>
</div>
</li>
</ol>
</li>
</ol>
<p>For information about how to create service entries and users, see the
OpenStack Installation Guide for your distribution
(<a class="reference external" href="http://docs.openstack.org">docs.openstack.org</a>).</p>
<div class="section" id="compute">
<h2>Compute<a class="headerlink" href="#compute" title="Permalink to this headline">¶</a></h2>
<p>If you use Networking, do not run the Compute nova-network service (like
you do in traditional Compute deployments). Instead, Compute delegates
most network-related decisions to Networking. Compute proxies
tenant-facing API calls to manage security groups and floating IPs to
Networking APIs. However, operator-facing tools such as nova-manage, are
not proxied and should not be used.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">When you configure networking, you must use this guide. Do not rely
on Compute networking documentation or past experience with Compute.
If a <strong class="command">nova</strong> command or configuration option related to networking
is not mentioned in this guide, the command is probably not
supported for use with Networking. In particular, you cannot use CLI
tools like <tt class="docutils literal"><span class="pre">nova-manage</span></tt> and <tt class="docutils literal"><span class="pre">nova</span></tt> to manage networks or IP
addressing, including both fixed and floating IPs, with Networking.</p>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Uninstall nova-network and reboot any physical nodes that have been
running nova-network before using them to run Networking.
Inadvertently running the nova-network process while using
Networking can cause problems, as can stale iptables rules pushed
down by previously running nova-network.</p>
</div>
<p>To ensure that Compute works properly with Networking (rather than the
legacy nova-network mechanism), you must adjust settings in the
<tt class="file docutils literal"><span class="pre">nova.conf</span></tt> configuration file.</p>
</div>
<div class="section" id="networking-api-and-credential-configuration">
<h2>Networking API and credential configuration<a class="headerlink" href="#networking-api-and-credential-configuration" title="Permalink to this headline">¶</a></h2>
<p>Each time you provision or de-provision a VM in Compute, nova-*
services communicate with Networking using the standard API. For this to
happen, you must configure the following items in the <tt class="file docutils literal"><span class="pre">nova.conf</span></tt> file
(used by each nova-compute and nova-api instance).</p>
<table border="1" class="docutils">
<caption><strong>nova.conf API and credential settings</strong></caption>
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Attribute name</th>
<th class="head">Required</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[DEFAULT]</span> <span class="pre">network_api_class</span></tt></td>
<td>Modify from the default to <tt class="docutils literal"><span class="pre">nova.network.neutronv2.api.API</span></tt>, to
indicate that Networking should be used rather than the traditional
nova-network networking model.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[neutron]</span> <span class="pre">url</span></tt></td>
<td>Update to the hostname/IP and port of the neutron-server instance
for this deployment.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[neutron]</span> <span class="pre">auth_strategy</span></tt></td>
<td>Keep the default <tt class="docutils literal"><span class="pre">keystone</span></tt> value for all production deployments.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[neutron]</span> <span class="pre">admin_tenant_name</span></tt></td>
<td>Update to the name of the service tenant created in the above section on
Identity configuration.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[neutron]</span> <span class="pre">admin_username</span></tt></td>
<td>Update to the name of the user created in the above section on Identity
configuration.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">[neutron]</span> <span class="pre">admin_password</span></tt></td>
<td>Update to the password of the user created in the above section on
Identity configuration.</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">[neutron]</span> <span class="pre">admin_auth_url</span></tt></td>
<td>Update to the Identity server IP and port. This is the Identity
(keystone) admin API server IP and port value, and not the Identity
service API IP and port.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configure-security-groups">
<h2>Configure security groups<a class="headerlink" href="#configure-security-groups" title="Permalink to this headline">¶</a></h2>
<p>The Networking service provides security group functionality using a
mechanism that is more flexible and powerful than the security group
capabilities built into Compute. Therefore, if you use Networking, you
should always disable built-in security groups and proxy all security
group calls to the Networking API. If you do not, security policies
will conflict by being simultaneously applied by both services.</p>
<p>To proxy security groups to Networking, use the following configuration
values in <tt class="file docutils literal"><span class="pre">nova.conf</span></tt>:</p>
<p><strong>nova.conf security group settings</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="30%" />
<col width="70%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Item</th>
<th class="head">Configuration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">firewall_driver</span></tt></td>
<td>Update to <tt class="docutils literal"><span class="pre">nova.virt.firewall.NoopFirewallDriver</span></tt>,
so that nova-compute does not perform
iptables-based filtering itself.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">security_group_api</span></tt></td>
<td>Update to <tt class="docutils literal"><span class="pre">neutron</span></tt>, so that all security group
requests are proxied to the Network Service.</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="configure-metadata">
<h2>Configure metadata<a class="headerlink" href="#configure-metadata" title="Permalink to this headline">¶</a></h2>
<p>The Compute service allows VMs to query metadata associated with a VM by
making a web request to a special 169.254.169.254 address. Networking
supports proxying those requests to nova-api, even when the requests are
made from isolated networks, or from multiple networks that use
overlapping IP addresses.</p>
<p>To enable proxying the requests, you must update the following fields in
<tt class="docutils literal"><span class="pre">[neutron]</span></tt> section in <tt class="file docutils literal"><span class="pre">nova.conf</span></tt>.</p>
<p><strong>nova.conf metadata settings</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="44%" />
<col width="56%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Item</th>
<th class="head">Configuration</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">service_metadata_proxy</span></tt></td>
<td>Update to <tt class="docutils literal"><span class="pre">true</span></tt>, otherwise nova-api
will not properly respond to requests
from the neutron-metadata-agent.</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">metadata_proxy_shared_secret</span></tt></td>
<td><p class="first">Update to a string &#8220;password&#8221; value.
You must also configure the same value in
the <tt class="docutils literal"><span class="pre">metadata_agent.ini</span></tt> file, to
authenticate requests made for metadata.</p>
<p class="last">The default value of an empty string in
both files will allow metadata to
function, but will not be secure if any
non-trusted entities have access to the
metadata APIs exposed by nova-api.</p>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">As a precaution, even when using <tt class="docutils literal"><span class="pre">metadata_proxy_shared_secret</span></tt>,
we recommend that you do not expose metadata using the same
nova-api instances that are used for tenants. Instead, you should
run a dedicated set of nova-api instances for metadata that are
available only on your management network. Whether a given nova-api
instance exposes metadata APIs is determined by the value of
<tt class="docutils literal"><span class="pre">enabled_apis</span></tt> in its <tt class="file docutils literal"><span class="pre">nova.conf</span></tt>.</p>
</div>
</div>
<div class="section" id="example-nova-conf-for-nova-compute-and-nova-api">
<h2>Example nova.conf (for nova-compute and nova-api)<a class="headerlink" href="#example-nova-conf-for-nova-compute-and-nova-api" title="Permalink to this headline">¶</a></h2>
<p>Example values for the above settings, assuming a cloud controller node
running Compute and Networking with an IP address of 192.168.1.2:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="k">[DEFAULT]</span>
<span class="na">security_group_api</span><span class="o">=</span><span class="s">neutron</span>
<span class="na">network_api_class</span><span class="o">=</span><span class="s">nova.network.neutronv2.api.API</span>
<span class="na">firewall_driver</span><span class="o">=</span><span class="s">nova.virt.firewall.NoopFirewallDriver</span>

<span class="k">[neutron]</span>
<span class="na">url</span><span class="o">=</span><span class="s">http://192.168.1.2:9696</span>
<span class="na">auth_strategy</span><span class="o">=</span><span class="s">keystone</span>
<span class="na">admin_tenant_name</span><span class="o">=</span><span class="s">service</span>
<span class="na">admin_username</span><span class="o">=</span><span class="s">neutron</span>
<span class="na">admin_password</span><span class="o">=</span><span class="s">password</span>
<span class="na">admin_auth_url</span><span class="o">=</span><span class="s">http://192.168.1.2:35357/v2.0</span>
<span class="na">service_metadata_proxy</span><span class="o">=</span><span class="s">true</span>
<span class="na">metadata_proxy_shared_secret</span><span class="o">=</span><span class="s">foo</span>
</pre></div>
</div>
</div>
</div>


              </div>
          </div>
          </div>
          <!-- <div class="docs-tags">
                <a href="#" class="docs-tag">Network Time Protocol (NTP)</a>
                <a href="#" class="docs-tag">Security</a>
                <a href="#" class="docs-tag">Conceptual architecture</a>
            </div> -->
<div class="docs-actions">
                  
                  <a href="networking_arch.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Networking architecture"></i></a>
                  
                  
                  <a href="networking_adv-config.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Advanced configuration options"></i></a>
                  
                  <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
                <div class="row docs-byline bottom">
                <div class="docs-updated">
                updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
</div>
    <div class="row">
         <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
           <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
<p>
 Except where otherwise noted, this document is licensed under Creative Commons
 Attribution 3.0 License
 <a href="#">http://creativecommons.org/licenses/by/3.0/legalcode</a>.
</p>
<p>
 <a href="http://www.openstack.org/legal">See All Legal Notices</a>
</p>
         </div>
         <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
                    <!-- ID buglinkbottom added so that pre-filled doc bugs
                    are sent to Launchpad projects related to the document -->
                    <a href="#" id="logABugLink2" class="docs-footer-actions">
                        <i class="fa fa-bug"></i>found an error? report a bug
                    </a>
                    <a href="http://ask.openstack.org" class="docs-footer-actions">
                        <i class="fa fa-question-circle"></i>questions? <a href="http://ask.openstack.org/">ask.openstack.org</a>
                    </a>
                </div>
     </div>
     </div>
            <!-- Docs Sidebar -->
                <div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
            <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            <div class="btn-group docs-sidebar-releases">
                <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
                <button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">Release: Kilo (April 2015)<i class="fa fa-caret-down"></i></button>
                <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
                    <li role="presentation" class="dropdown-header">Releases</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/kilo/">Kilo (current release)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/juno/">Juno (October 2014)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/icehouse/">Icehouse (May 2014)</a></li>
                    <li role="presentation" class="dropdown-header">Languages</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ja/">日本語 (Japanese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/de/">Deutsch (German)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/fr/">Français (French)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/pt_BR/">Português (Portuguese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/zh_CN/">简体中文 (Simplified Chinese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ko_KR/">한국어 (Korean)</a></li>
                </ul>
            </div>
                <div class="docs-sidebar-toc">
                    <div class="docs-sidebar-section" id="install-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#install-guides"><h4>Install Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="user-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#user-guides"><h4>User Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="configuration-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#configuration-guides"><h4>Configuration Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="operations-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/openstack-ops/content/"><h4>Operations Guide</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="api-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#api-guides"><h4>API Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="contributor-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#contributor-guides"><h4>Contributor Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="table-of-contents">
                        <a class="docs-sidebar-section-title"><h4>Contents</h4></a>
                        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get_started_with_openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity_management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_file_systems.html">Shared File Systems</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="networking.html">Networking</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="networking_introduction.html">Introduction to Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_config-plugins.html">Plug-in configurations</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_config-agents.html">Configure neutron agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_arch.html">Networking architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Configure Identity service for Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_adv-config.html">Advanced configuration options</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_multi-dhcp-agents.html">Scalable and highly available DHCP agents</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_use.html">Use Networking</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_adv-features.html">Advanced features through API extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_adv-operational-features.html">Advanced operational features</a></li>
<li class="toctree-l2"><a class="reference internal" href="networking_auth.html">Authentication and authorization</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross_project.html">Cross-project features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app_support.html">Community support</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

                    </div>
                </div>
                </div>

</div>
</div>
    <!-- End Page Content -->

    <!-- Footer -->
    <!-- Footer -->
        <footer>
        <div class="container">
            <div class="row footer-links">
                <div class="col-lg-2 col-sm-2">
                    <h3>OpenStack</h3>
                    <ul>
                        <li><a href="/foundation">About the Foundation</a></li>
                        <li><a
href="http://openstack.org/projects/">Projects</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-security/">OpenStack
Security</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
                        <li><a href="http://openstack.org/blog/">Blog</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Community</h3>
                    <ul>
                        <li><a href="http://openstack.org/community/">User
Groups</a></li>
                        <li><a
href="http://openstack.org/community/events/">Events</a></li>
                        <li><a
href="http://openstack.org/community/jobs/">Jobs</a></li>
                        <li><a
href="http://openstack.org/foundation/companies/">Companies</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute">Contribute</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Documentation</h3>
                    <ul>
                        <li><a href="http://docs.openstack.org">OpenStack
Manuals</a></li>
                        <li><a
href="http://openstack.org/software/start/">Getting Started</a></li>
                        <li><a href="http://developer.openstack.org">API
Documentation</a></li>
                        <li><a href="https://wiki.openstack.org">Wiki</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Branding & Legal</h3>
                    <ul>
                        <li><a href="http://openstack.org/brand/">Logos &
Guidelines</a></li>
                        <li><a
href="http://openstack.org/brand/openstack-trademark-policy/">Trademark
Policy</a></li>
                        <li><a href="http://openstack.org/privacy/">Privacy
Policy</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributors_License_Agreement">OpenStack
CLA</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-sm-4">
                    <h3>Stay In Touch</h3>
                    <a href="https://twitter.com/OpenStack" target="_blank"
class="social-icons footer-twitter"></a>
                    <a href="https://www.facebook.com/openstack"
target="_blank" class="social-icons footer-facebook"></a>
                    <a href="https://www.linkedin.com/company/openstack"
target="_blank" class="social-icons footer-linkedin"></a>
                    <a href="https://www.youtube.com/user/OpenStackFoundation"
target="_blank" class="social-icons footer-youtube"></a>
                    <!-- <form class="form-inline">
                        <div class="form-group newsletter-form">
                            <label>Join Our Newsletter</label>
                            <input class="newsletter-input" type="input"
placeholder="Email">
                            <button type="submit"
class="newsletter-btn">Join</button>
                        </div>
                    </form> -->
                    <p class="fine-print">
                        The OpenStack project is provided under the Apache 2.0
license. Openstack.org is powered by <a href="http://rackspace.com"
target="_blank">Rackspace Cloud Computing</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <div class="footer-bottom">
        <div class="container">
            <form class="form-inline" id="FeedbackForm_FeedbackForm" action="/home/FeedbackForm" method="post" enctype="application/x-www-form-urlencoded">
              <div class="form-group">
                <div>
                  <input class="feedback-input" type="input" placeholder="Give Us Your Feedback On This Page">
                  <button type="submit" class="feedback-btn">Submit</button>
                </div>
              </div>
            </form>
        </div>
    </div>

<!-- Scripts in: static directory-->
    <!-- jQuery Version 1.11.0 -->
    <script type="text/javascript" src="_static/js/jquery-1.11.3.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

    <!-- The rest of the JS -->
    <script type="text/javascript" src="_static/js/navigation.js"></script>

    <!-- Docs JS -->
    <script type="text/javascript" src="_static/js/docs.js"></script>

    <!-- Popovers -->
    <script type="text/javascript" src="_static/js/webui-popover.js"></script>

    <!-- Javascript for page -->
    <script language="JavaScript">
    /* build a description of this page including SHA, source location on git repo and
       build time, the project's launchpad bug tag and set the HREF of the bug buttons */

        var lineFeed = "%0A";

        /* gitsha, project and bug_tag rely on variables in conf.py */
        var gitSha = "SHA: f7a37b8ab67b5fbe8597432774a12df3186c2e65"
        var bugTitle = "Configure Identity service for Networking in Cloud Administrator Guide"
        var fieldTags = "admin-guide-cloud"

        /* "last_updated" is the build date and time. It relies on the
           conf.py variable "html_last_updated_fmt", which should include
           year/month/day as well as hours and minutes                   */
        var buildstring = "Release: 0.9 on 2015-10-23 15:47"

        var fieldComment = encodeURI(buildstring) +
                           lineFeed + encodeURI(gitSha) +
                           lineFeed + encodeURI(gitlink)

        logABug(bugTitle, fieldComment, fieldTags)
    </script>
    <!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
        (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
       </script>

 </body>
</html>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

  <title>OpenStack Docs: Database</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<!-- CSS references are in the css.html template -->
    <!-- Bootstrap Core CSS -->
    <link href="_static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Pygments css -->
    <link href="_static/css/native.css" rel="stylesheet">

    <!-- Fonts -->
    <!--<link href="font-awesome.min.css" rel="stylesheet">-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

	<!-- BB: theme style sheets moved here so that theme rules aren't 
	     overridden by awesome rules. Should they go after the scripts below? -->
    <!-- Custom CSS -->
    <link href="_static/css/combined.css" rel="stylesheet">
    <link href="_static/css/styles.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Page-specific CSS -->
  
  
 </head>
 <body>
    <!-- Header -->
        <!-- Header Navigation -->
        <nav class="navbar navbar-default inner" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
             <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
      <span class="sr-only">
      Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      </button>
                <div class="brand-wrapper">
                    <a class="navbar-brand" href="/"></a>
                </div>
                <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling
-->
            <div class="collapse navbar-collapse"
id="bs-example-navbar-collapse-1">
                <div class="search-container tiny">



  <div id="gcse">
    <script type="text/javascript">
      (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search gname="standard"></gcse:search>
  </div>


                    <i class="fa fa-times close-search"></i>
                </div>
                    <ul class="nav navbar-nav navbar-main show">
                        <li>



  <div id="gcse-mobile">
    <gcse:search gname="mobile"></gcse:search>
  </div>


                        </li>


                        <li>

                                <a href="http://www.openstack.org/software/" class="drop"
id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuSoftware">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-compute/">Compute</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-storage/">Storage</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-networking/">Networking</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-dashboard/">Dashboard</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-shared-services/">Shared Services</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get
Started</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/user-stories/" class="drop"
id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuUsers">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//superuser.openstack.org/">Superuser
Magazine</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/enterprise/auto/">Featured:  Top 10
Automaker</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/community/" class="drop"
id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuCommunity">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//ask.openstack.org/">Ask A Technical
Question</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Main_Page">OpenStack Wiki</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Community Events</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Getting_The_Code">Source Code</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/foundation/companies/">Supporting Companies</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/jobs/">Jobs</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/join/">Join The
Community</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/marketplace/">Marketplace</a>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/events/" class="drop"
id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuEvents">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Overview</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/summit/openstack-paris-summit-2014/">The OpenStack
Summit</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More
OpenStack Events</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/blog/">Blog</a>

                        </li>

                        <li>

                                <a href="http://docs.openstack.org/">Docs</a>

                        </li>


                        <li>
                            <a href="http://openstack.org/Security/login/"
class="sign-in-btn">Sign In</a>
                        </li>
                    </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Begin Page Content -->
        <div class="container docs-book-wrapper">
        <div class="row">
            <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<!-- Row with title and buttons-->
            <div class="row">
                <div class="col-lg-8">
                <h2>Database</h2>
                </div>
<div class="docs-actions">
                  
                  <a href="telemetry-best-practices.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Telemetry best practices"></i></a>
                  
                  
                  <a href="baremetal.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Bare Metal"></i></a>
                  
                  <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
            </div>
            <div class="row docs-byline">
                <div class="docs-updated">
                    updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="docs-top-contents">
                    <h5>Contents</h5>
                    <ul>
<li><a class="reference internal" href="#">Database</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#create-a-datastore">Create a datastore</a></li>
<li><a class="reference internal" href="#configure-a-cluster">Configure a cluster</a></li>
</ul>
</li>
</ul>

                    </div>
                <div class="docs-body">

  <div class="section" id="database">
<span id="id1"></span><h1>Database<a class="headerlink" href="#database" title="Permalink to this headline">¶</a></h1>
<p>The Database service provides database management features.</p>
<div class="section" id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>The Database service provides scalable and reliable cloud
provisioning functionality for both relational and non-relational
database engines. Users can quickly and easily use database features
without the burden of handling complex administrative tasks. Cloud
users and database administrators can provision and manage multiple
database instances as needed.</p>
<p>The Database service provides resource isolation at high performance
levels, and automates complex administrative tasks such as
deployment, configuration, patching, backups, restores, and
monitoring.</p>
</div>
<div class="section" id="create-a-datastore">
<h2>Create a datastore<a class="headerlink" href="#create-a-datastore" title="Permalink to this headline">¶</a></h2>
<p>An administrative user can create datastores for a variety of
databases.</p>
<p>This section assumes you do not yet have a MySQL datastore, and shows
you how to create a MySQL datastore and populate it with a MySQL 5.5
datastore version.</p>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p><strong>To create a datastore</strong></p>
<ol class="arabic">
<li><p class="first"><strong>Create a trove image</strong></p>
<p>Create an image for the type of database you want to use, for
example, MySQL, MongoDB, Cassandra.</p>
<p>This image must have the trove guest agent installed, and it must
have the <tt class="file docutils literal"><span class="pre">trove-guestagent.conf</span></tt> file configured to connect to
your OpenStack environment. To configure <tt class="file docutils literal"><span class="pre">trove-guestagent.conf</span></tt>,
add the following lines to <tt class="file docutils literal"><span class="pre">trove-guestagent.conf</span></tt> on the guest
instance you are using to build your image:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">rabbit_host</span> <span class="o">=</span> <span class="s">controller</span>
<span class="na">rabbit_password</span> <span class="o">=</span> <span class="s">RABBIT_PASS</span>
<span class="na">nova_proxy_admin_user</span> <span class="o">=</span> <span class="s">admin</span>
<span class="na">nova_proxy_admin_pass</span> <span class="o">=</span> <span class="s">ADMIN_PASS</span>
<span class="na">nova_proxy_admin_tenant_name</span> <span class="o">=</span> <span class="s">service</span>
<span class="na">trove_auth_url</span> <span class="o">=</span> <span class="s">http://controller:35357/v2.0</span>
</pre></div>
</div>
<p>This example assumes you have created a MySQL 5.5 image called
<tt class="docutils literal"><span class="pre">mysql-5.5.qcow2</span></tt>.</p>
</li>
<li><p class="first"><strong>Register image with Image service</strong></p>
<p>You need to register your guest image with the Image service.</p>
<p>In this example, you use the glance <strong class="command">image-create</strong>
command to register a <tt class="docutils literal"><span class="pre">mysql-5.5.qcow2</span></tt> image:</p>
<div class="highlight-python"><div class="highlight"><pre>$ glance image-create --name mysql-5.5 --disk-format qcow2 --container-format bare --is-public True &lt; mysql-5.5.qcow2
+------------------+--------------------------------------+
| Property         | Value                                |
+------------------+--------------------------------------+
| checksum         | d41d8cd98f00b204e9800998ecf8427e     |
| container_format | bare                                 |
| created_at       | 2014-05-23T21:01:18                  |
| deleted          | False                                |
| deleted_at       | None                                 |
| disk_format      | qcow2                                |
| id               | bb75f870-0c33-4907-8467-1367f8cb15b6 |
| is_public        | True                                 |
| min_disk         | 0                                    |
| min_ram          | 0                                    |
| name             | mysql-5.5                            |
| owner            | 1448da1223124bb291f5ae8e9af4270d     |
| protected        | False                                |
| size             | 0                                    |
| status           | active                               |
| updated_at       | 2014-05-23T21:01:22                  |
| virtual_size     | None                                 |
+------------------+--------------------------------------+
</pre></div>
</div>
</li>
<li><p class="first"><strong>Create the datastore</strong></p>
<p>Create the datastore that will house the new image. To do this, use
the <strong class="command">trove-manage</strong> <strong class="command">datastore_update</strong> command.</p>
<p>This example uses the following arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">In this example:</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>config file</td>
<td>The configuration file to use.</td>
<td><em class="xref std std-option">--config-file=/etc/trove/trove.conf</em></td>
</tr>
<tr class="row-odd"><td>name</td>
<td>Name you want to use for this datastore.</td>
<td><tt class="docutils literal"><span class="pre">mysql</span></tt></td>
</tr>
<tr class="row-even"><td>default version</td>
<td>You can attach multiple versions/images to a datastore. For
example, you might have a MySQL 5.5 version and a MySQL 5.6
version. You can designate one version as the default, which
the system uses if a user does not explicitly request a
specific version.</td>
<td><p class="first"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt></p>
<p class="last">At this point, you do not yet have a default version, so pass
in an empty string.</p>
</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>$ trove-manage --config-file=/etc/trove/trove.conf datastore_update mysql &quot;&quot;
</pre></div>
</div>
</li>
<li><p class="first"><strong>Add a version to the new datastore</strong></p>
<p>Now that you have a MySQL datastore, you can add a version to it,
using the trove-manage <strong class="command">datastore_version_update</strong> command.
The version indicates which guest image to use.</p>
<p>This example uses the following arguments:</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">In this example:</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>config file</td>
<td>The configuration file to use.</td>
<td><em class="xref std std-option">--config-file=/etc/trove/trove.conf</em></td>
</tr>
<tr class="row-odd"><td>datastore</td>
<td>The name of the datastore you just created via
trove-manage <strong class="command">datastore_update</strong>.</td>
<td><tt class="docutils literal"><span class="pre">mysql</span></tt></td>
</tr>
<tr class="row-even"><td>version name</td>
<td>The name of the version you are adding to the datastore.</td>
<td><tt class="docutils literal"><span class="pre">mysql-5.5</span></tt></td>
</tr>
<tr class="row-odd"><td>datastore manager</td>
<td><p class="first">Which datastore manager to use for this version. Typically,
the datastore manager is identified by one of the following
strings, depending on the database:</p>
<ul class="last simple">
<li>mysql</li>
<li>redis</li>
<li>mongodb</li>
<li>cassandra</li>
<li>couchbase</li>
<li>percona</li>
</ul>
</td>
<td><tt class="docutils literal"><span class="pre">mysql</span></tt></td>
</tr>
<tr class="row-even"><td>glance ID</td>
<td>The ID of the guest image you just added to the Identity
service. You can get this ID by using the glance
<strong class="command">image-show</strong> IMAGE_NAME command.</td>
<td>bb75f870-0c33-4907-8467-1367f8cb15b6</td>
</tr>
<tr class="row-odd"><td>packages</td>
<td>If you want to put additional packages on each guest that
you create with this datastore version, you can list the
package names here.</td>
<td><p class="first"><tt class="docutils literal"><span class="pre">&quot;&quot;</span></tt></p>
<p class="last">In this example, the guest image already contains all the
required packages, so leave this argument empty.</p>
</td>
</tr>
<tr class="row-even"><td>active</td>
<td><dl class="first last docutils">
<dt>Set this to either 1 or 0:</dt>
<dd><ul class="first last simple">
<li><tt class="docutils literal"><span class="pre">1</span></tt> = active</li>
<li><tt class="docutils literal"><span class="pre">0</span></tt> = disabled</li>
</ul>
</dd>
</dl>
</td>
<td>1</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre>$ trove-manage --config-file=/etc/trove/trove.conf datastore_version_update mysql mysql-5.5 mysql GLANCE_ID &quot;&quot; 1
</pre></div>
</div>
<p><strong>Optional.</strong> Set your new version as the default version. To do
this, use the trove-manage <strong class="command">datastore_update</strong> command again,
this time specifying the version you just created.</p>
<div class="highlight-python"><div class="highlight"><pre>$ trove-manage --config-file=/etc/trove/trove.conf datastore_update mysql mysql-5.5
</pre></div>
</div>
</li>
<li><p class="first"><strong>Load validation rules for configuration groups</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p><strong>Applies only to MySQL and Percona datastores</strong></p>
<ul class="last simple">
<li>If you just created a MySQL or Percona datastore, then you need
to load the appropriate validation rules, as described in this
step.</li>
<li>If you just created a different datastore, skip this step.</li>
</ul>
</div>
<p><strong>Background.</strong> You can manage database configuration tasks by using
configuration groups. Configuration groups let you set configuration
parameters, in bulk, on one or more databases.</p>
<p>When you set up a configuration group using the trove
<strong class="command">configuration-create</strong> command, this command compares the configuration
values you are setting against a list of valid configuration values
that are stored in the <tt class="file docutils literal"><span class="pre">validation-rules.json</span></tt> file.</p>
<table border="1" class="docutils">
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operating System</th>
<th class="head">Location of <tt class="file docutils literal"><span class="pre">validation-rules.json</span></tt></th>
<th class="head">Notes</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ubuntu 14.04</td>
<td><tt class="file docutils literal"><span class="pre">/usr/lib/python2.7/dist-packages/trove/templates/DATASTORE_NAME</span></tt></td>
<td>DATASTORE_NAME is the name of either the MySQL datastore or
the Percona datastore. This is typically either <tt class="docutils literal"><span class="pre">mysql</span></tt>
or <tt class="docutils literal"><span class="pre">percona</span></tt>.</td>
</tr>
<tr class="row-odd"><td>RHEL 7, CentOS 7, Fedora 20, and Fedora 21</td>
<td><tt class="file docutils literal"><span class="pre">/usr/lib/python2.7/site-packages/trove/templates/DATASTORE_NAME</span></tt></td>
<td>DATASTORE_NAME is the name of either the MySQL datastore or
the Percona datastore. This is typically either <tt class="docutils literal"><span class="pre">mysql</span></tt> or <tt class="docutils literal"><span class="pre">percona</span></tt>.</td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Therefore, as part of creating a datastore, you need to load the
<tt class="file docutils literal"><span class="pre">validation-rules.json</span></tt> file, using the <strong class="command">trove-manage</strong>
<strong class="command">db_load_datastore_config_parameters</strong> command. This command
takes the following arguments:</p>
<ul class="simple">
<li>Datastore name</li>
<li>Datastore version</li>
<li>Full path to the <tt class="file docutils literal"><span class="pre">validation-rules.json</span></tt> file</li>
</ul>
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>This example loads the <tt class="file docutils literal"><span class="pre">validation-rules.json</span></tt> file for a MySQL
database on Ubuntu 14.04:</p>
<div class="highlight-python"><div class="highlight"><pre>$ trove-manage db_load_datastore_config_parameters mysql mysql-5.5 /usr/lib/python2.7/dist-packages/trove/templates/mysql/validation-rules.json
</pre></div>
</div>
</li>
<li><p class="first"><strong>Validate datastore</strong></p>
<p>To validate your new datastore and version, start by listing the
datastores on your system:</p>
<div class="highlight-python"><div class="highlight"><pre>$ trove datastore-list
+--------------------------------------+--------------+
|                  id                  |     name     |
+--------------------------------------+--------------+
| 10000000-0000-0000-0000-000000000001 | Legacy MySQL |
| e5dc1da3-f080-4589-a4c2-eff7928f969a |    mysql     |
+--------------------------------------+--------------+
</pre></div>
</div>
<p>Take the ID of the MySQL datastore and pass it in with the
<strong class="command">datastore-version-list</strong> command:</p>
<div class="highlight-python"><div class="highlight"><pre>$ trove datastore-version-list DATASTORE_ID
+--------------------------------------+-----------+
|                  id                  |    name   |
+--------------------------------------+-----------+
| 36a6306b-efd8-4d83-9b75-8b30dd756381 | mysql-5.5 |
+--------------------------------------+-----------+
</pre></div>
</div>
</li>
</ol>
</div>
<div class="section" id="configure-a-cluster">
<h2>Configure a cluster<a class="headerlink" href="#configure-a-cluster" title="Permalink to this headline">¶</a></h2>
<p>An administrative user can configure various characteristics of a
MongoDB cluster.</p>
<p><strong>Query routers and config servers</strong></p>
<p><strong>Background.</strong> Each cluster includes at least one query router and
one config server. Query routers and config servers count against your
quota. When you delete a cluster, the system deletes the associated
query router(s) and config server(s).</p>
<p><strong>Configuration.</strong> By default, the system creates one query router and
one config server per cluster. You can change this by editing
the <tt class="file docutils literal"><span class="pre">/etc/trove/trove.conf</span></tt> file. These settings are in the
<tt class="docutils literal"><span class="pre">mongodb</span></tt> section of the file:</p>
<table border="1" class="docutils">
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Setting</th>
<th class="head">Valid values are:</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>num_config_servers_per_cluster</td>
<td>1 or 3</td>
</tr>
<tr class="row-odd"><td>num_query_routers_per_cluster</td>
<td>1 or 3</td>
</tr>
</tbody>
</table>
</div>
</div>


              </div>
          </div>
          </div>
          <!-- <div class="docs-tags">
                <a href="#" class="docs-tag">Network Time Protocol (NTP)</a>
                <a href="#" class="docs-tag">Security</a>
                <a href="#" class="docs-tag">Conceptual architecture</a>
            </div> -->
<div class="docs-actions">
                  
                  <a href="telemetry-best-practices.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Telemetry best practices"></i></a>
                  
                  
                  <a href="baremetal.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Bare Metal"></i></a>
                  
                  <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
                <div class="row docs-byline bottom">
                <div class="docs-updated">
                updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
</div>
    <div class="row">
         <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
           <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
<p>
 Except where otherwise noted, this document is licensed under Creative Commons
 Attribution 3.0 License
 <a href="#">http://creativecommons.org/licenses/by/3.0/legalcode</a>.
</p>
<p>
 <a href="http://www.openstack.org/legal">See All Legal Notices</a>
</p>
         </div>
         <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
                    <!-- ID buglinkbottom added so that pre-filled doc bugs
                    are sent to Launchpad projects related to the document -->
                    <a href="#" id="logABugLink2" class="docs-footer-actions">
                        <i class="fa fa-bug"></i>found an error? report a bug
                    </a>
                    <a href="http://ask.openstack.org" class="docs-footer-actions">
                        <i class="fa fa-question-circle"></i>questions? <a href="http://ask.openstack.org/">ask.openstack.org</a>
                    </a>
                </div>
     </div>
     </div>
            <!-- Docs Sidebar -->
                <div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
            <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            <div class="btn-group docs-sidebar-releases">
                <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
                <button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">Release: Kilo (April 2015)<i class="fa fa-caret-down"></i></button>
                <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
                    <li role="presentation" class="dropdown-header">Releases</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/kilo/">Kilo (current release)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/juno/">Juno (October 2014)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/icehouse/">Icehouse (May 2014)</a></li>
                    <li role="presentation" class="dropdown-header">Languages</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ja/">日本語 (Japanese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/de/">Deutsch (German)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/fr/">Français (French)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/pt_BR/">Português (Portuguese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/zh_CN/">简体中文 (Simplified Chinese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ko_KR/">한국어 (Korean)</a></li>
                </ul>
            </div>
                <div class="docs-sidebar-toc">
                    <div class="docs-sidebar-section" id="install-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#install-guides"><h4>Install Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="user-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#user-guides"><h4>User Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="configuration-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#configuration-guides"><h4>Configuration Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="operations-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/openstack-ops/content/"><h4>Operations Guide</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="api-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#api-guides"><h4>API Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="contributor-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#contributor-guides"><h4>Contributor Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="table-of-contents">
                        <a class="docs-sidebar-section-title"><h4>Contents</h4></a>
                        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get_started_with_openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity_management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_file_systems.html">Shared File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Database</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#create-a-datastore">Create a datastore</a></li>
<li class="toctree-l2"><a class="reference internal" href="#configure-a-cluster">Configure a cluster</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross_project.html">Cross-project features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app_support.html">Community support</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

                    </div>
                </div>
                </div>

</div>
</div>
    <!-- End Page Content -->

    <!-- Footer -->
    <!-- Footer -->
        <footer>
        <div class="container">
            <div class="row footer-links">
                <div class="col-lg-2 col-sm-2">
                    <h3>OpenStack</h3>
                    <ul>
                        <li><a href="/foundation">About the Foundation</a></li>
                        <li><a
href="http://openstack.org/projects/">Projects</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-security/">OpenStack
Security</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
                        <li><a href="http://openstack.org/blog/">Blog</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Community</h3>
                    <ul>
                        <li><a href="http://openstack.org/community/">User
Groups</a></li>
                        <li><a
href="http://openstack.org/community/events/">Events</a></li>
                        <li><a
href="http://openstack.org/community/jobs/">Jobs</a></li>
                        <li><a
href="http://openstack.org/foundation/companies/">Companies</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute">Contribute</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Documentation</h3>
                    <ul>
                        <li><a href="http://docs.openstack.org">OpenStack
Manuals</a></li>
                        <li><a
href="http://openstack.org/software/start/">Getting Started</a></li>
                        <li><a href="http://developer.openstack.org">API
Documentation</a></li>
                        <li><a href="https://wiki.openstack.org">Wiki</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Branding & Legal</h3>
                    <ul>
                        <li><a href="http://openstack.org/brand/">Logos &
Guidelines</a></li>
                        <li><a
href="http://openstack.org/brand/openstack-trademark-policy/">Trademark
Policy</a></li>
                        <li><a href="http://openstack.org/privacy/">Privacy
Policy</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributors_License_Agreement">OpenStack
CLA</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-sm-4">
                    <h3>Stay In Touch</h3>
                    <a href="https://twitter.com/OpenStack" target="_blank"
class="social-icons footer-twitter"></a>
                    <a href="https://www.facebook.com/openstack"
target="_blank" class="social-icons footer-facebook"></a>
                    <a href="https://www.linkedin.com/company/openstack"
target="_blank" class="social-icons footer-linkedin"></a>
                    <a href="https://www.youtube.com/user/OpenStackFoundation"
target="_blank" class="social-icons footer-youtube"></a>
                    <!-- <form class="form-inline">
                        <div class="form-group newsletter-form">
                            <label>Join Our Newsletter</label>
                            <input class="newsletter-input" type="input"
placeholder="Email">
                            <button type="submit"
class="newsletter-btn">Join</button>
                        </div>
                    </form> -->
                    <p class="fine-print">
                        The OpenStack project is provided under the Apache 2.0
license. Openstack.org is powered by <a href="http://rackspace.com"
target="_blank">Rackspace Cloud Computing</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <div class="footer-bottom">
        <div class="container">
            <form class="form-inline" id="FeedbackForm_FeedbackForm" action="/home/FeedbackForm" method="post" enctype="application/x-www-form-urlencoded">
              <div class="form-group">
                <div>
                  <input class="feedback-input" type="input" placeholder="Give Us Your Feedback On This Page">
                  <button type="submit" class="feedback-btn">Submit</button>
                </div>
              </div>
            </form>
        </div>
    </div>

<!-- Scripts in: static directory-->
    <!-- jQuery Version 1.11.0 -->
    <script type="text/javascript" src="_static/js/jquery-1.11.3.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

    <!-- The rest of the JS -->
    <script type="text/javascript" src="_static/js/navigation.js"></script>

    <!-- Docs JS -->
    <script type="text/javascript" src="_static/js/docs.js"></script>

    <!-- Popovers -->
    <script type="text/javascript" src="_static/js/webui-popover.js"></script>

    <!-- Javascript for page -->
    <script language="JavaScript">
    /* build a description of this page including SHA, source location on git repo and
       build time, the project's launchpad bug tag and set the HREF of the bug buttons */

        var lineFeed = "%0A";

        /* gitsha, project and bug_tag rely on variables in conf.py */
        var gitSha = "SHA: f7a37b8ab67b5fbe8597432774a12df3186c2e65"
        var bugTitle = "Database in Cloud Administrator Guide"
        var fieldTags = "admin-guide-cloud"

        /* "last_updated" is the build date and time. It relies on the
           conf.py variable "html_last_updated_fmt", which should include
           year/month/day as well as hours and minutes                   */
        var buildstring = "Release: 0.9 on 2015-10-23 15:47"

        var fieldComment = encodeURI(buildstring) +
                           lineFeed + encodeURI(gitSha) +
                           lineFeed + encodeURI(gitlink)

        logABug(bugTitle, fieldComment, fieldTags)
    </script>
    <!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
        (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
       </script>

 </body>
</html>
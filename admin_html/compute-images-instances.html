<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

  <title>OpenStack Docs: Images and instances</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<!-- CSS references are in the css.html template -->
    <!-- Bootstrap Core CSS -->
    <link href="_static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Pygments css -->
    <link href="_static/css/native.css" rel="stylesheet">

    <!-- Fonts -->
    <!--<link href="font-awesome.min.css" rel="stylesheet">-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

	<!-- BB: theme style sheets moved here so that theme rules aren't 
	     overridden by awesome rules. Should they go after the scripts below? -->
    <!-- Custom CSS -->
    <link href="_static/css/combined.css" rel="stylesheet">
    <link href="_static/css/styles.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Page-specific CSS -->
  
  
 </head>
 <body>
    <!-- Header -->
        <!-- Header Navigation -->
        <nav class="navbar navbar-default inner" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
             <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
      <span class="sr-only">
      Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      </button>
                <div class="brand-wrapper">
                    <a class="navbar-brand" href="/"></a>
                </div>
                <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling
-->
            <div class="collapse navbar-collapse"
id="bs-example-navbar-collapse-1">
                <div class="search-container tiny">



  <div id="gcse">
    <script type="text/javascript">
      (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search gname="standard"></gcse:search>
  </div>


                    <i class="fa fa-times close-search"></i>
                </div>
                    <ul class="nav navbar-nav navbar-main show">
                        <li>



  <div id="gcse-mobile">
    <gcse:search gname="mobile"></gcse:search>
  </div>


                        </li>


                        <li>

                                <a href="http://www.openstack.org/software/" class="drop"
id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuSoftware">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-compute/">Compute</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-storage/">Storage</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-networking/">Networking</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-dashboard/">Dashboard</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-shared-services/">Shared Services</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get
Started</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/user-stories/" class="drop"
id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuUsers">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//superuser.openstack.org/">Superuser
Magazine</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/enterprise/auto/">Featured:  Top 10
Automaker</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/community/" class="drop"
id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuCommunity">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//ask.openstack.org/">Ask A Technical
Question</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Main_Page">OpenStack Wiki</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Community Events</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Getting_The_Code">Source Code</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/foundation/companies/">Supporting Companies</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/jobs/">Jobs</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/join/">Join The
Community</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/marketplace/">Marketplace</a>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/events/" class="drop"
id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuEvents">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Overview</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/summit/openstack-paris-summit-2014/">The OpenStack
Summit</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More
OpenStack Events</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/blog/">Blog</a>

                        </li>

                        <li>

                                <a href="http://docs.openstack.org/">Docs</a>

                        </li>


                        <li>
                            <a href="http://openstack.org/Security/login/"
class="sign-in-btn">Sign In</a>
                        </li>
                    </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Begin Page Content -->
        <div class="container docs-book-wrapper">
        <div class="row">
            <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<!-- Row with title and buttons-->
            <div class="row">
                <div class="col-lg-8">
                <h2>Images and instances</h2>
                </div>
<div class="docs-actions">
                  
                  <a href="compute_arch.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: System architecture"></i></a>
                  
                  
                  <a href="compute-networking-nova.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Networking with nova-network"></i></a>
                  
                  <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
            </div>
            <div class="row docs-byline">
                <div class="docs-updated">
                    updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="docs-top-contents">
                    <h5>Contents</h5>
                    <ul>
<li><a class="reference internal" href="#">Images and instances</a><ul>
<li><a class="reference internal" href="#image-management">Image management</a></li>
<li><a class="reference internal" href="#image-properties-and-property-protection">Image properties and property protection</a></li>
<li><a class="reference internal" href="#image-download-how-it-works">Image download: how it works</a></li>
<li><a class="reference internal" href="#instance-building-blocks">Instance building blocks</a></li>
<li><a class="reference internal" href="#instance-management-tools">Instance management tools</a></li>
<li><a class="reference internal" href="#control-where-instances-run">Control where instances run</a></li>
</ul>
</li>
</ul>

                    </div>
                <div class="docs-body">

  <div class="section" id="images-and-instances">
<h1>Images and instances<a class="headerlink" href="#images-and-instances" title="Permalink to this headline">¶</a></h1>
<p>Disk images provide templates for virtual machine file systems. The
Image service controls storage and management of images.</p>
<p>Instances are the individual virtual machines that run on physical
compute nodes. Users can launch any number of instances from the same
image. Each launched instance runs from a copy of the base image so that
any changes made to the instance do not affect the base image. You can
take snapshots of running instances to create an image based on the
current disk state of a particular instance. The Compute service manages
instances.</p>
<p>When you launch an instance, you must choose a <tt class="docutils literal"><span class="pre">flavor</span></tt>, which
represents a set of virtual resources. Flavors define how many virtual
CPUs an instance has, the amount of RAM available to it, and the size of
its ephemeral disks. Users must select from the set of available flavors
defined on their cloud. OpenStack provides a number of predefined
flavors that you can edit or add to.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ul class="last simple">
<li>For more information about creating and troubleshooting images,
see the <a class="reference external" href="http://docs.openstack.org/image-guide/content/">OpenStack Virtual Machine Image
Guide</a>.</li>
<li>For more information about image configuration options, see the
<a class="reference external" href="http://docs.openstack.org/liberty/config-reference/content/ch_configuring-openstack-image-service.html">Image
services</a>
section of the OpenStack Configuration Reference.</li>
<li>For more information about flavors, see <a class="reference internal" href="compute-flavors.html#compute-flavors"><em>Flavors</em></a> or
<a class="reference external" href="http://docs.openstack.org/openstack-ops/content/flavors.html">Flavors</a>
in the OpenStack Operations Guide.</li>
</ul>
</div>
<p>You can add and remove additional resources from running instances, such
as persistent volume storage, or public IP addresses. The example used
in this chapter is of a typical virtual system within an OpenStack
cloud. It uses the <tt class="docutils literal"><span class="pre">cinder-volume</span></tt> service, which provides persistent
block storage, instead of the ephemeral storage provided by the selected
instance flavor.</p>
<p>This diagram shows the system state prior to launching an instance. The
image store, fronted by the Image service (glance) has a number of
predefined images. Inside the cloud, a compute node contains the
available vCPU, memory, and local disk resources. Additionally, the
<tt class="docutils literal"><span class="pre">cinder-volume</span></tt> service provides a number of predefined volumes.</p>
<p><img alt="Base image state with no running instances" src="_images/instance-life-1.png" /></p>
<p>To launch an instance select an image, flavor, and any optional
attributes. The selected flavor provides a root volume, labeled <tt class="docutils literal"><span class="pre">vda</span></tt>
in this diagram, and additional ephemeral storage, labeled <tt class="docutils literal"><span class="pre">vdb</span></tt>. In
this example, the <tt class="docutils literal"><span class="pre">cinder-volume</span></tt> store is mapped to the third virtual
disk on this instance, <tt class="docutils literal"><span class="pre">vdc</span></tt>.</p>
<p><img alt="Instance creation from image and runtime state" src="_images/instance-life-2.png" /></p>
<p>The base image is copied from the image store to the local disk. The
local disk is the first disk that the instance accesses, labeled <tt class="docutils literal"><span class="pre">vda</span></tt>
in this diagram. Your instances will start up faster if you use smaller
images, as less data needs to be copied across the network.</p>
<p>A new empty ephemeral disk is also created, labeled <tt class="docutils literal"><span class="pre">vdb</span></tt> in this
diagram. This disk is destroyed when you delete the instance.</p>
<p>The compute node connects to the attached <tt class="docutils literal"><span class="pre">cinder-volume</span></tt> using iSCSI. The
<tt class="docutils literal"><span class="pre">cinder-volume</span></tt> is mapped to the third disk, labeled <tt class="docutils literal"><span class="pre">vdc</span></tt> in this
diagram. After the compute node provisions the vCPU and memory
resources, the instance boots up from root volume <tt class="docutils literal"><span class="pre">vda</span></tt>. The instance
runs and changes data on the disks (highlighted in red on the diagram).
If the volume store is located on a separate network, the
<tt class="docutils literal"><span class="pre">my_block_storage_ip</span></tt> option specified in the storage node
configuration file directs image traffic to the compute node.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Some details in this example scenario might be different in your
environment. For example, you might use a different type of back-end
storage, or different network protocols. One common variant is that
the ephemeral storage used for volumes <tt class="docutils literal"><span class="pre">vda</span></tt> and <tt class="docutils literal"><span class="pre">vdb</span></tt> could be
backed by network storage rather than a local disk.</p>
</div>
<p>When the instance is deleted, the state is reclaimed with the exception
of the persistent volume. The ephemeral storage is purged; memory and
vCPU resources are released. The image remains unchanged throughout this
process.</p>
<p><img alt="End state of image and volume after instance exits" src="_images/instance-life-3.png" /></p>
<div class="section" id="image-management">
<h2>Image management<a class="headerlink" href="#image-management" title="Permalink to this headline">¶</a></h2>
<p>The OpenStack Image service discovers, registers, and retrieves virtual
machine images. The service also includes a RESTful API that allows you
to query VM image metadata and retrieve the actual image with HTTP
requests. For more information about the API, see the <a class="reference external" href="http://developer.openstack.org/api-ref.html">OpenStack API
Complete Reference</a> and
the <a class="reference external" href="http://docs.openstack.org/developer/python-glanceclient/">Python
API</a>.</p>
<p>The OpenStack Image service can be controlled using a command-line tool.
For more information about using the OpenStack Image command-line tool,
see the <a class="reference external" href="http://docs.openstack.org/user-guide/common/cli_manage_images.html">Manage
Images</a>
section in the OpenStack End User Guide.</p>
<p>Virtual images that have been made available through the Image service
can be stored in a variety of ways. In order to use these services, you
must have a working installation of the Image service, with a working
endpoint, and users that have been created in OpenStack Identity.
Additionally, you must meet the environment variables required by the
Compute and Image service clients.</p>
<p>The Image service supports these back-end stores:</p>
<dl class="docutils">
<dt>File system</dt>
<dd>The OpenStack Image service stores virtual machine images in the
file system back end by default. This simple back end writes image
files to the local file system.</dd>
<dt>Object Storage</dt>
<dd>The OpenStack highly available service for storing objects.</dd>
<dt>Block Storage</dt>
<dd>The OpenStack highly available service for storing blocks.</dd>
<dt>VMware</dt>
<dd>ESX/ESXi or vCenter Server target system.</dd>
<dt>S3</dt>
<dd>The Amazon S3 service.</dd>
<dt>HTTP</dt>
<dd>OpenStack Image service can read virtual machine images that are
available on the Internet using HTTP. This store is read only.</dd>
<dt>RADOS Block Device (RBD)</dt>
<dd>Stores images inside of a Ceph storage cluster using Ceph&#8217;s RBD
interface.</dd>
<dt>Sheepdog</dt>
<dd>A distributed storage system for QEMU/KVM.</dd>
<dt>GridFS</dt>
<dd>Stores images using MongoDB.</dd>
</dl>
</div>
<div class="section" id="image-properties-and-property-protection">
<h2>Image properties and property protection<a class="headerlink" href="#image-properties-and-property-protection" title="Permalink to this headline">¶</a></h2>
<p>An image property is a key and value pair that the cloud administrator
or the image owner attaches to an OpenStack Image service image, as
follows:</p>
<ul class="simple">
<li>The cloud administrator defines core properties, such as the image
name.</li>
<li>The cloud administrator and the image owner can define additional
properties, such as licensing and billing information.</li>
</ul>
<p>The cloud administrator can configure any property as protected, which
limits which policies or user roles can perform CRUD operations on that
property. Protected properties are generally additional properties to
which only cloud administrators have access.</p>
<p>For unprotected image properties, the cloud administrator can manage
core properties and the image owner can manage additional properties.</p>
<p><strong>To configure property protection</strong></p>
<p>To configure property protection, the cloud administrator completes
these steps:</p>
<ol class="arabic">
<li><p class="first">Define roles or policies in the <tt class="file docutils literal"><span class="pre">policy.json</span></tt> file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="p">{</span>
    <span class="s">&quot;context_is_admin&quot;</span><span class="p">:</span>  <span class="s">&quot;role:admin&quot;</span><span class="p">,</span>
    <span class="s">&quot;default&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;add_image&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;delete_image&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_image&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_images&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_image&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;publicize_image&quot;</span><span class="p">:</span> <span class="s">&quot;role:admin&quot;</span><span class="p">,</span>
    <span class="s">&quot;copy_from&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;download_image&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;upload_image&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;delete_image_location&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_image_location&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;set_image_location&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;add_member&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;delete_member&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_member&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_members&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_member&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;manage_image_cache&quot;</span><span class="p">:</span> <span class="s">&quot;role:admin&quot;</span><span class="p">,</span>

    <span class="s">&quot;get_task&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_tasks&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_task&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_task&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;deactivate&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;reactivate&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;get_metadef_namespace&quot;</span><span class="p">:</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_metadef_namespaces&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_metadef_namespace&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_metadef_namespace&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;get_metadef_object&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_metadef_objects&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_metadef_object&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_metadef_object&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;list_metadef_resource_types&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_metadef_resource_type&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_metadef_resource_type_association&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;get_metadef_property&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_metadef_properties&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_metadef_property&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_metadef_property&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>

    <span class="s">&quot;get_metadef_tag&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;get_metadef_tags&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;modify_metadef_tag&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_metadef_tag&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span><span class="p">,</span>
    <span class="s">&quot;add_metadef_tags&quot;</span><span class="p">:</span><span class="s">&quot;&quot;</span>
 <span class="p">}</span>
</pre></div>
</div>
<p>For each parameter, use <tt class="docutils literal"><span class="pre">&quot;rule:restricted&quot;</span></tt> to restrict access to all
users or <tt class="docutils literal"><span class="pre">&quot;role:admin&quot;</span></tt> to limit access to administrator roles.
For example:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;download_image&quot;:
&quot;upload_image&quot;:
</pre></div>
</div>
</li>
<li><p class="first">Define which roles or policies can manage which properties in a property
protections configuration file. For example:</p>
<div class="highlight-python"><div class="highlight"><pre>[x_none_read]
create = context_is_admin
read = !
update = !
delete = !

[x_none_update]
create = context_is_admin
read = context_is_admin
update = !
delete = context_is_admin

[x_none_delete]
create = context_is_admin
read = context_is_admin
update = context_is_admin
delete = !
</pre></div>
</div>
<ul class="simple">
<li>A value of <tt class="docutils literal"><span class="pre">&#64;</span></tt> allows the corresponding operation for a property.</li>
<li>A value of <tt class="docutils literal"><span class="pre">!</span></tt> disallows the corresponding operation for a
property.</li>
</ul>
</li>
<li><p class="first">In the <tt class="file docutils literal"><span class="pre">glance-api.conf</span></tt> file, define the location of a property
protections configuration file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">property_protection_file</span> <span class="o">=</span> <span class="p">{</span><span class="n">file_name</span><span class="p">}</span>
</pre></div>
</div>
<p>This file contains the rules for property protections and the roles and
policies associated with it.</p>
<p>By default, property protections are not enforced.</p>
<p>If you specify a file name value and the file is not found, the
<cite>glance-api</cite> service does not start.</p>
<p>To view a sample configuration file, see
<a class="reference external" href="http://docs.openstack.org/liberty/config-reference/content/section_glance-api.conf.html">glance-api.conf</a>.</p>
</li>
<li><p class="first">Optionally, in the <tt class="file docutils literal"><span class="pre">glance-api.conf</span></tt> file, specify whether roles or
policies are used in the property protections configuration file:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">property_protection_rule_format</span> <span class="o">=</span> <span class="n">roles</span>
</pre></div>
</div>
<p>The default is <tt class="docutils literal"><span class="pre">roles</span></tt>.</p>
<p>To view a sample configuration file, see
<a class="reference external" href="http://docs.openstack.org/liberty/config-reference/content/section_glance-api.conf.html">glance-api.conf</a>.</p>
</li>
</ol>
</div>
<div class="section" id="image-download-how-it-works">
<h2>Image download: how it works<a class="headerlink" href="#image-download-how-it-works" title="Permalink to this headline">¶</a></h2>
<p>Prior to starting a virtual machine, the virtual machine image used must
be transferred to the compute node from the Image service. How this
works can change depending on the settings chosen for the compute node
and the Image service.</p>
<p>Typically, the Compute service will use the image identifier passed to
it by the scheduler service and request the image from the Image API.
Though images are not stored in glance—rather in a back end, which could
be Object Storage, a filesystem or any other supported method—the
connection is made from the compute node to the Image service and the
image is transferred over this connection. The Image service streams the
image from the back end to the compute node.</p>
<p>It is possible to set up the Object Storage node on a separate network,
and still allow image traffic to flow between the Compute and Object
Storage nodes. Configure the <tt class="docutils literal"><span class="pre">my_block_storage_ip</span></tt> option in the
storage node configuration to allow block storage traffic to reach the
Compute node.</p>
<p>Certain back ends support a more direct method, where on request the
Image service will return a URL that can be used to download the image
directly from the back-end store. Currently the only store to support
the direct download approach is the filesystem store. It can be
configured using the <tt class="docutils literal"><span class="pre">filesystems</span></tt> option in the <tt class="docutils literal"><span class="pre">image_file_url</span></tt>
section of the <tt class="file docutils literal"><span class="pre">nova.conf</span></tt> file on compute nodes.</p>
<p>Compute nodes also implement caching of images, meaning that if an image
has been used before it won&#8217;t necessarily be downloaded every time.
Information on the configuration options for caching on compute nodes
can be found in the <a class="reference external" href="http://docs.openstack.org/liberty/config-reference/content/">Configuration
Reference</a>.</p>
</div>
<div class="section" id="instance-building-blocks">
<h2>Instance building blocks<a class="headerlink" href="#instance-building-blocks" title="Permalink to this headline">¶</a></h2>
<p>In OpenStack, the base operating system is usually copied from an image
stored in the OpenStack Image service. This results in an ephemeral
instance that starts from a known template state and loses all
accumulated states on shutdown.</p>
<p>You can also put an operating system on a persistent volume in Compute
or the Block Storage volume system. This gives a more traditional,
persistent system that accumulates states that are preserved across
restarts. To get a list of available images on your system, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ nova image-list
+---------------------------+------------------+--------+----------------+
| ID                        | Name             | Status | Server         |
+---------------------------+------------------+--------+----------------+
| aee1d242-730f-431f-88c1-  |                  |        |                |
| 87630c0f07ba              | Ubuntu 14.04     |        |                |
|                           | cloudimg amd64   | ACTIVE |                |
| 0b27baa1-0ca6-49a7-b3f4-  |                  |        |                |
| 48388e440245              | Ubuntu 14.10     |        |                |
|                           | cloudimg amd64   | ACTIVE |                |
| df8d56fc-9cea-4dfd-a8d3-  |                  |        |                |
| 28764de3cb08              | jenkins          | ACTIVE |                |
+---------------------------+------------------+--------+----------------+
</pre></div>
</div>
<p>The displayed image attributes are:</p>
<dl class="docutils">
<dt><tt class="docutils literal"><span class="pre">ID</span></tt></dt>
<dd>Automatically generated UUID of the image.</dd>
<dt><tt class="docutils literal"><span class="pre">Name</span></tt></dt>
<dd>Free form, human-readable name for the image.</dd>
<dt><tt class="docutils literal"><span class="pre">Status</span></tt></dt>
<dd>The status of the image. Images marked <tt class="docutils literal"><span class="pre">ACTIVE</span></tt> are available for
use.</dd>
<dt><tt class="docutils literal"><span class="pre">Server</span></tt></dt>
<dd>For images that are created as snapshots of running instances, this
is the UUID of the instance the snapshot derives from. For uploaded
images, this field is blank.</dd>
</dl>
<p>Virtual hardware templates are called <tt class="docutils literal"><span class="pre">flavors</span></tt>. The default
installation provides five predefined flavors.</p>
<p>For a list of flavors that are available on your system, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ nova flavor-list
+----+----------+----------+-----+----------+-----+------+------------+----------+
| ID | Name     | Memory_MB| Disk| Ephemeral| Swap| VCPUs| RXTX_Factor| Is_Public|
+----+----------+----------+-----+----------+-----+------+------------+----------+
| 1  | m1.tiny  | 512      | 1   | 0        |     | 1    | 1.0        | True     |
| 2  | m1.small | 2048     | 20  | 0        |     | 1    | 1.0        | True     |
| 3  | m1.medium| 4096     | 40  | 0        |     | 2    | 1.0        | True     |
| 4  | m1.large | 8192     | 80  | 0        |     | 4    | 1.0        | True     |
| 5  | m1.xlarge| 16384    | 160 | 0        |     | 8    | 1.0        | True     |
+----+----------+----------+-----+----------+-----+------+------------+----------+
</pre></div>
</div>
<p>By default, administrative users can configure the flavors. You can
change this behavior by redefining the access controls for
<tt class="docutils literal"><span class="pre">compute_extension:flavormanage</span></tt> in <tt class="file docutils literal"><span class="pre">/etc/nova/policy.json</span></tt> on the
<tt class="docutils literal"><span class="pre">compute-api</span></tt> server.</p>
</div>
<div class="section" id="instance-management-tools">
<h2>Instance management tools<a class="headerlink" href="#instance-management-tools" title="Permalink to this headline">¶</a></h2>
<p>OpenStack provides command-line, web interface, and API-based instance
management tools. Third-party management tools are also available, using
either the native API or the provided EC2-compatible API.</p>
<p>The OpenStack python-novaclient package provides a basic command-line
utility, which uses the <strong class="command">nova</strong> command. This is available as a native
package for most Linux distributions, or you can install the latest
version using the pip python package installer:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># pip install python-novaclient</span>
</pre></div>
</div>
<p>For more information about python-novaclient and other command-line
tools, see the <a class="reference external" href="http://docs.openstack.org/user-guide/index.html">OpenStack End User
Guide</a>.</p>
</div>
<div class="section" id="control-where-instances-run">
<h2>Control where instances run<a class="headerlink" href="#control-where-instances-run" title="Permalink to this headline">¶</a></h2>
<p>The <a class="reference external" href="http://docs.openstack.org/liberty/config-reference/content/">OpenStack Configuration
Reference</a>
provides detailed information on controlling where your instances run,
including ensuring a set of instances run on different compute nodes for
service resiliency or on the same node for high performance
inter-instance communications.</p>
<p>Administrative users can specify which compute node their instances
run on. To do this, specify the <tt class="docutils literal"><span class="pre">--availability-zone</span>
<span class="pre">AVAILABILITY_ZONE:COMPUTE_HOST</span></tt> parameter.</p>
</div>
</div>


              </div>
          </div>
          </div>
          <!-- <div class="docs-tags">
                <a href="#" class="docs-tag">Network Time Protocol (NTP)</a>
                <a href="#" class="docs-tag">Security</a>
                <a href="#" class="docs-tag">Conceptual architecture</a>
            </div> -->
<div class="docs-actions">
                  
                  <a href="compute_arch.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: System architecture"></i></a>
                  
                  
                  <a href="compute-networking-nova.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Networking with nova-network"></i></a>
                  
                  <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
                <div class="row docs-byline bottom">
                <div class="docs-updated">
                updated: 2015-10-23 15:47 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
</div>
    <div class="row">
         <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
           <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
<p>
 Except where otherwise noted, this document is licensed under Creative Commons
 Attribution 3.0 License
 <a href="#">http://creativecommons.org/licenses/by/3.0/legalcode</a>.
</p>
<p>
 <a href="http://www.openstack.org/legal">See All Legal Notices</a>
</p>
         </div>
         <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
                    <!-- ID buglinkbottom added so that pre-filled doc bugs
                    are sent to Launchpad projects related to the document -->
                    <a href="#" id="logABugLink2" class="docs-footer-actions">
                        <i class="fa fa-bug"></i>found an error? report a bug
                    </a>
                    <a href="http://ask.openstack.org" class="docs-footer-actions">
                        <i class="fa fa-question-circle"></i>questions? <a href="http://ask.openstack.org/">ask.openstack.org</a>
                    </a>
                </div>
     </div>
     </div>
            <!-- Docs Sidebar -->
                <div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
            <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            <div class="btn-group docs-sidebar-releases">
                <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
                <button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">Release: Kilo (April 2015)<i class="fa fa-caret-down"></i></button>
                <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
                    <li role="presentation" class="dropdown-header">Releases</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/kilo/">Kilo (current release)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/juno/">Juno (October 2014)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/icehouse/">Icehouse (May 2014)</a></li>
                    <li role="presentation" class="dropdown-header">Languages</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ja/">日本語 (Japanese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/de/">Deutsch (German)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/fr/">Français (French)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/pt_BR/">Português (Portuguese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/zh_CN/">简体中文 (Simplified Chinese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ko_KR/">한국어 (Korean)</a></li>
                </ul>
            </div>
                <div class="docs-sidebar-toc">
                    <div class="docs-sidebar-section" id="install-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#install-guides"><h4>Install Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="user-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#user-guides"><h4>User Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="configuration-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#configuration-guides"><h4>Configuration Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="operations-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/openstack-ops/content/"><h4>Operations Guide</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="api-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#api-guides"><h4>API Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="contributor-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#contributor-guides"><h4>Contributor Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="table-of-contents">
                        <a class="docs-sidebar-section-title"><h4>Contents</h4></a>
                        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get_started_with_openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity_management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="compute.html">Compute</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="compute_arch.html">System architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Images and instances</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute-networking-nova.html">Networking with nova-network</a></li>
<li class="toctree-l2"><a class="reference internal" href="compute-system-admin.html">System administration</a></li>
<li class="toctree-l2"><a class="reference internal" href="common/support-compute.html">Troubleshoot Compute</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="shared_file_systems.html">Shared File Systems</a></li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="baremetal.html">Bare Metal</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross_project.html">Cross-project features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app_support.html">Community support</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

                    </div>
                </div>
                </div>

</div>
</div>
    <!-- End Page Content -->

    <!-- Footer -->
    <!-- Footer -->
        <footer>
        <div class="container">
            <div class="row footer-links">
                <div class="col-lg-2 col-sm-2">
                    <h3>OpenStack</h3>
                    <ul>
                        <li><a href="/foundation">About the Foundation</a></li>
                        <li><a
href="http://openstack.org/projects/">Projects</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-security/">OpenStack
Security</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
                        <li><a href="http://openstack.org/blog/">Blog</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Community</h3>
                    <ul>
                        <li><a href="http://openstack.org/community/">User
Groups</a></li>
                        <li><a
href="http://openstack.org/community/events/">Events</a></li>
                        <li><a
href="http://openstack.org/community/jobs/">Jobs</a></li>
                        <li><a
href="http://openstack.org/foundation/companies/">Companies</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute">Contribute</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Documentation</h3>
                    <ul>
                        <li><a href="http://docs.openstack.org">OpenStack
Manuals</a></li>
                        <li><a
href="http://openstack.org/software/start/">Getting Started</a></li>
                        <li><a href="http://developer.openstack.org">API
Documentation</a></li>
                        <li><a href="https://wiki.openstack.org">Wiki</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Branding & Legal</h3>
                    <ul>
                        <li><a href="http://openstack.org/brand/">Logos &
Guidelines</a></li>
                        <li><a
href="http://openstack.org/brand/openstack-trademark-policy/">Trademark
Policy</a></li>
                        <li><a href="http://openstack.org/privacy/">Privacy
Policy</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributors_License_Agreement">OpenStack
CLA</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-sm-4">
                    <h3>Stay In Touch</h3>
                    <a href="https://twitter.com/OpenStack" target="_blank"
class="social-icons footer-twitter"></a>
                    <a href="https://www.facebook.com/openstack"
target="_blank" class="social-icons footer-facebook"></a>
                    <a href="https://www.linkedin.com/company/openstack"
target="_blank" class="social-icons footer-linkedin"></a>
                    <a href="https://www.youtube.com/user/OpenStackFoundation"
target="_blank" class="social-icons footer-youtube"></a>
                    <!-- <form class="form-inline">
                        <div class="form-group newsletter-form">
                            <label>Join Our Newsletter</label>
                            <input class="newsletter-input" type="input"
placeholder="Email">
                            <button type="submit"
class="newsletter-btn">Join</button>
                        </div>
                    </form> -->
                    <p class="fine-print">
                        The OpenStack project is provided under the Apache 2.0
license. Openstack.org is powered by <a href="http://rackspace.com"
target="_blank">Rackspace Cloud Computing</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <div class="footer-bottom">
        <div class="container">
            <form class="form-inline" id="FeedbackForm_FeedbackForm" action="/home/FeedbackForm" method="post" enctype="application/x-www-form-urlencoded">
              <div class="form-group">
                <div>
                  <input class="feedback-input" type="input" placeholder="Give Us Your Feedback On This Page">
                  <button type="submit" class="feedback-btn">Submit</button>
                </div>
              </div>
            </form>
        </div>
    </div>

<!-- Scripts in: static directory-->
    <!-- jQuery Version 1.11.0 -->
    <script type="text/javascript" src="_static/js/jquery-1.11.3.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

    <!-- The rest of the JS -->
    <script type="text/javascript" src="_static/js/navigation.js"></script>

    <!-- Docs JS -->
    <script type="text/javascript" src="_static/js/docs.js"></script>

    <!-- Popovers -->
    <script type="text/javascript" src="_static/js/webui-popover.js"></script>

    <!-- Javascript for page -->
    <script language="JavaScript">
    /* build a description of this page including SHA, source location on git repo and
       build time, the project's launchpad bug tag and set the HREF of the bug buttons */

        var lineFeed = "%0A";

        /* gitsha, project and bug_tag rely on variables in conf.py */
        var gitSha = "SHA: f7a37b8ab67b5fbe8597432774a12df3186c2e65"
        var bugTitle = "Images and instances in Cloud Administrator Guide"
        var fieldTags = "admin-guide-cloud"

        /* "last_updated" is the build date and time. It relies on the
           conf.py variable "html_last_updated_fmt", which should include
           year/month/day as well as hours and minutes                   */
        var buildstring = "Release: 0.9 on 2015-10-23 15:47"

        var fieldComment = encodeURI(buildstring) +
                           lineFeed + encodeURI(gitSha) +
                           lineFeed + encodeURI(gitlink)

        logABug(bugTitle, fieldComment, fieldTags)
    </script>
    <!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
        (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
       </script>

 </body>
</html>
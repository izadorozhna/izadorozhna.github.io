<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html lang="en" xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>

  <title>OpenStack Docs: SAMPLES</title>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    
<!-- CSS references are in the css.html template -->
    <!-- Bootstrap Core CSS -->
    <link href="_static/css/bootstrap.min.css" rel="stylesheet">

    <!-- Pygments css -->
    <link href="_static/css/native.css" rel="stylesheet">

    <!-- Fonts -->
    <!--<link href="font-awesome.min.css" rel="stylesheet">-->
    <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300,400,700' rel='stylesheet' type='text/css'>

	<!-- BB: theme style sheets moved here so that theme rules aren't 
	     overridden by awesome rules. Should they go after the scripts below? -->
    <!-- Custom CSS -->
    <link href="_static/css/combined.css" rel="stylesheet">
    <link href="_static/css/styles.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- Page-specific CSS -->
  
  
 </head>
 <body>
    <!-- Header -->
        <!-- Header Navigation -->
        <nav class="navbar navbar-default inner" role="navigation">
        <div class="container">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
             <button class="navbar-toggle" data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" type="button">
      <span class="sr-only">
      Toggle navigation
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      <span class="icon-bar">
      </span>
      </button>
                <div class="brand-wrapper">
                    <a class="navbar-brand" href="/"></a>
                </div>
                <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            </div>
            <!-- Collect the nav links, forms, and other content for toggling
-->
            <div class="collapse navbar-collapse"
id="bs-example-navbar-collapse-1">
                <div class="search-container tiny">



  <div id="gcse">
    <script type="text/javascript">
      (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
    </script>
    <gcse:search gname="standard"></gcse:search>
  </div>


                    <i class="fa fa-times close-search"></i>
                </div>
                    <ul class="nav navbar-nav navbar-main show">
                        <li>



  <div id="gcse-mobile">
    <gcse:search gname="mobile"></gcse:search>
  </div>


                        </li>


                        <li>

                                <a href="http://www.openstack.org/software/" class="drop"
id="dropdownMenuSoftware">Software <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuSoftware">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-compute/">Compute</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-storage/">Storage</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-networking/">Networking</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-dashboard/">Dashboard</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/software/openstack-shared-services/">Shared Services</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/software/start/">Get
Started</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/user-stories/" class="drop"
id="dropdownMenuUsers">Users <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuUsers">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/user-stories/">Overview</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//superuser.openstack.org/">Superuser
Magazine</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="http://www.openstack.org/enterprise/auto/">Featured:  Top 10
Automaker</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/community/" class="drop"
id="dropdownMenuCommunity">Community <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuCommunity">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="http://www.openstack.org/community/">Welcome! Start Here</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//ask.openstack.org/">Ask A Technical
Question</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Main_Page">OpenStack Wiki</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Community Events</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//wiki.openstack.org/wiki/Getting_The_Code">Source Code</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/foundation/companies/">Supporting Companies</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/jobs/">Jobs</a></li>



                                            <li role="presentation"
class="divider"></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/join/">Join The
Community</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/marketplace/">Marketplace</a>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/events/" class="drop"
id="dropdownMenuEvents">Events <i class="fa fa-caret-down"></i></a>
                                <ul class="dropdown-menu" role="menu"
aria-labelledby="dropdownMenuEvents">


                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/community/events/">Overview</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1"
href="//www.openstack.org/summit/openstack-paris-summit-2014/">The OpenStack
Summit</a></li>



                                            <li role="presentation"><a
role="menuitem" tabindex="-1" href="//www.openstack.org/community/events/">More
OpenStack Events</a></li>


                                </ul>

                        </li>

                        <li>

                                <a href="http://www.openstack.org/blog/">Blog</a>

                        </li>

                        <li>

                                <a href="http://docs.openstack.org/">Docs</a>

                        </li>


                        <li>
                            <a href="http://openstack.org/Security/login/"
class="sign-in-btn">Sign In</a>
                        </li>
                    </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    <!-- Begin Page Content -->
        <div class="container docs-book-wrapper">
        <div class="row">
            <div class="col-lg-9 col-md-8 col-sm-8 col-lg-push-3 col-md-push-4 col-sm-push-4">
<!-- Row with title and buttons-->
            <div class="row">
                <div class="col-lg-8">
                <h2>SAMPLES</h2>
                </div>
<div class="docs-actions">
                  
                  <a href="file_shares_troubleshoot.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Troubleshoot your installation"></i></a>
                  
                  
                  <a href="networking.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Networking"></i></a>
                  
                  <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
            </div>
            <div class="row docs-byline">
                <div class="docs-updated">
                    updated: 2015-09-28 17:24 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="docs-top-contents">
                    <h5>Contents</h5>
                    <ul>
<li><a class="reference internal" href="#">SAMPLES</a><ul>
<li><a class="reference internal" href="#networking">Networking</a></li>
<li><a class="reference internal" href="#create-share">Create share</a></li>
<li><a class="reference internal" href="#share-metadata">Share metadata</a></li>
<li><a class="reference internal" href="#manage-snapshots">Manage snapshots</a></li>
<li><a class="reference internal" href="#admin-actions-reset-state-and-force-delete">Admin actions (reset state and force-delete)</a></li>
<li><a class="reference internal" href="#manage-access-to-share">Manage access to share</a></li>
<li><a class="reference internal" href="#resize-share">Resize share</a></li>
<li><a class="reference internal" href="#security-services-for-networking">Security services for networking</a></li>
<li><a class="reference internal" href="#limits-and-quotas">Limits and Quotas</a></li>
</ul>
</li>
</ul>

                    </div>
                <div class="docs-body">

  <span class="target" id="file-shares-samples"></span><div class="section" id="samples">
<h1>SAMPLES<a class="headerlink" href="#samples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="networking">
<h2>Networking<a class="headerlink" href="#networking" title="Permalink to this headline">¶</a></h2>
<p>List networks in a tenant, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ neutron net-list
+--------------+---------+---------------------------------------+
| id           | name    | subnets                               |
+--------------+---------+---------------------------------------+
| bee7411d-... | public  | 884a6564-0f11-... 2001:db8::/64       |
|              |         | e6da81fa-5d5f-... 172.24.4.0/24       |
| 5ed5a854-... | private | 74dcfb5a-b4d7-... 10.0.0.0/24         |
|              |         | cc297be2-5213-... fd7d:177d:a48b::/64 |
+--------------+---------+---------------------------------------+
</pre></div>
</div>
<p>A share network stores network information that share servers can use where
shares are hosted. You can associate a share with a single share network.
When you create or update a share, you can optionally specify the ID of a share
network through which instances can access the share.</p>
<p>You can create, update, view, and delete a share network. When you create a
share network, you can specify only one type of network:</p>
<ul class="simple">
<li>Neutron network. Specify a network ID and subnet ID.</li>
<li>Nova network. Specify a network ID.</li>
</ul>
<p>For more information about supported plug-ins for share networks, see Manila
Network Plugins.</p>
<p>A share network has these attributes:</p>
<ul class="simple">
<li>The IP block in Classless Inter-Domain Routing (CIDR) notation from which to
allocate the network.</li>
<li>The IP version of the network.</li>
<li>The network type, which is vlan, vxlan, gre, flat, or local.</li>
</ul>
<p>If the network uses segmentation, a segmentation identifier. For example, VLAN,
VXLAN, and GRE networks use segmentation.</p>
<p>To create a share network with private network and subnetwork, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila share-network-create --neutron-net-id 5ed5a854-21dc-4ed3-870a-117b7064eb21 --neutron-subnet-id 74dcfb5a-b4d7-4855-86f5-a669729428dc --name my_share_net --description &quot;My first share network&quot;
+-------------------+--------------------------------------+
| Property          | Value                                |
+-------------------+--------------------------------------+
| name              | my_share_net                         |
| segmentation_id   | None                                 |
| created_at        | 2015-09-24T12:06:32.602174           |
| neutron_subnet_id | 74dcfb5a-b4d7-4855-86f5-a669729428dc |
| updated_at        | None                                 |
| network_type      | None                                 |
| neutron_net_id    | 5ed5a854-21dc-4ed3-870a-117b7064eb21 |
| ip_version        | None                                 |
| nova_net_id       | None                                 |
| cidr              | None                                 |
| project_id        | 20787a7ba11946adad976463b57d8a2f     |
| id                | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a |
| description       | My first share network               |
+-------------------+--------------------------------------+
</pre></div>
</div>
<p>The <tt class="docutils literal"><span class="pre">segmentation_id</span></tt>, <tt class="docutils literal"><span class="pre">cidr</span></tt>, <tt class="docutils literal"><span class="pre">ip_version</span></tt>, and <tt class="docutils literal"><span class="pre">network_type</span></tt>
share network attributes are automatically set to the values determined by the
network provider.</p>
<p>Check network list, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila share-network-list
+--------------------------------------+--------------+
| id                                   | name         |
+--------------------------------------+--------------+
| 5c3cbabb-f4da-465f-bc7f-fadbe047b85a | my_share_net |
+--------------------------------------+--------------+
</pre></div>
</div>
<p>After creating a share network you can see it in the neutron list of networks:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ neutron net-list
+--------------+------------------------+------------------------------------+
| id           | name                   | subnets                            |
+--------------+------------------------+------------------------------------+
| 3b5a629a-e...| manila_service_network | 4f366100-50... 10.254.0.0/28       |
| bee7411d-d...| public                 | 884a6564-01... 2001:db8::/64       |
|              |                        | e6da81fa-55... 172.24.4.0/24       |
| 5ed5a854-2...| private                | 74dcfb5a-bd... 10.0.0.0/24         |
|              |                        | cc297be2-51... fd7d:177d:a48b::/64 |
+--------------+------------------------+------------------------------------+
</pre></div>
</div>
<p>You also can see detailed information about the share network including
<tt class="docutils literal"><span class="pre">network_type</span></tt>, <tt class="docutils literal"><span class="pre">segmentation_id</span></tt> fields:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ neutron net-show manila_service_network
+---------------------------+--------------------------------------+
| Field                     | Value                                |
+---------------------------+--------------------------------------+
| admin_state_up            | True                                 |
| id                        | 3b5a629a-e7a1-46a3-afb2-ab666fb884bc |
| mtu                       | 0                                    |
| name                      | manila_service_network               |
| port_security_enabled     | True                                 |
| provider:network_type     | vxlan                                |
| provider:physical_network |                                      |
| provider:segmentation_id  | 1068                                 |
| router:external           | False                                |
| shared                    | False                                |
| status                    | ACTIVE                               |
| subnets                   | 4f366100-5108-4fa2-b5b1-989a121c1403 |
| tenant_id                 | 24c6491074e942309a908c674606f598     |
+---------------------------+--------------------------------------+
</pre></div>
</div>
<p>You also can add and remove the security services to the share network. For
details, see Security services for networking section.</p>
</div>
<div class="section" id="create-share">
<h2>Create share<a class="headerlink" href="#create-share" title="Permalink to this headline">¶</a></h2>
<p>Check share types that exist, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila type-list
+------+-----------+----------------------------------+----------------------+
| ID   | Visibility| required_extra_specs             | optional_extra_specs |
+------+-----------+----------------------------------+----------------------+
| c0...| public    | driver_handles_share_servers:True| snapshot_support:True|
+------+-----------+----------------------------------+----------------------+
</pre></div>
</div>
<p>Let&#8217;s create a public share with <tt class="docutils literal"><span class="pre">my_share_net</span></tt> network, <tt class="docutils literal"><span class="pre">default</span></tt>
share type, <tt class="docutils literal"><span class="pre">nfs</span></tt> shared file system protocol, and size 1 GB:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila create nfs 1 --name &quot;Share1&quot; --description &quot;My first share&quot; --share-type default --share-network my_share_net --metadata aim=testing --public
+-----------------------------+--------------------------------------+
| Property                    | Value                                |
+-----------------------------+--------------------------------------+
| status                      | None                                 |
| share_type_name             | default                              |
| description                 | My first share                       |
| availability_zone           | None                                 |
| share_network_id            | None                                 |
| export_locations            | []                                   |
| share_server_id             | None                                 |
| host                        | None                                 |
| snapshot_id                 | None                                 |
| is_public                   | True                                 |
| task_state                  | None                                 |
| snapshot_support            | True                                 |
| id                          | aca648eb-8c03-4394-a5cc-755066b7eb66 |
| size                        | 1                                    |
| name                        | Share1                               |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86 |
| created_at                  | 2015-09-24T12:19:06.925951           |
| export_location             | None                                 |
| share_proto                 | NFS                                  |
| consistency_group_id        | None                                 |
| source_cgsnapshot_member_id | None                                 |
| project_id                  | 20787a7ba11946adad976463b57d8a2f     |
| metadata                    | {u&#39;aim&#39;: u&#39;testing&#39;}                 |
+-----------------------------+--------------------------------------+
</pre></div>
</div>
<p>See the share in a share list:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila list
+----+-------+-----+------------+-----------+----------------------+
| ID | Name  | Size| Share Proto| Share Type| Host                 |
+----+-------+-----+------------+-----------+----------------------+
| a..| Share1| 1   | NFS        | c0086...  | manila@generic1#GEN..|
+----+-------+-----+------------+-----------+----------------------+
</pre></div>
</div>
<p>Check the share status. After <tt class="docutils literal"><span class="pre">creating</span></tt> status share should have status
<tt class="docutils literal"><span class="pre">available</span></tt>:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila show Share1
+-----------------------------+-------------------------------------------+
| Property                    | Value                                     |
+-----------------------------+-------------------------------------------+
| status                      | available                                 |
| share_type_name             | default                                   |
| description                 | My first share                            |
| availability_zone           | nova                                      |
| share_network_id            | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a      |
| export_locations            | 10.254.0.3:/shares/share-2d5e2c0a-1f84... |
| share_server_id             | 41b7829d-7f6b-4c96-aea5-d106c2959961      |
| host                        | manila@generic1#GENERIC1                  |
| snapshot_id                 | None                                      |
| is_public                   | True                                      |
| task_state                  | None                                      |
| snapshot_support            | True                                      |
| id                          | aca648eb-8c03-4394-a5cc-755066b7eb66      |
| size                        | 1                                         |
| name                        | Share1                                    |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86      |
| created_at                  | 2015-09-24T12:19:06.000000                |
| share_proto                 | NFS                                       |
| consistency_group_id        | None                                      |
| source_cgsnapshot_member_id | None                                      |
| project_id                  | 20787a7ba11946adad976463b57d8a2f          |
| metadata                    | {u&#39;aim&#39;: u&#39;testing&#39;}                      |
+-----------------------------+-------------------------------------------+
</pre></div>
</div>
<p>Update the name, or description, or level of visibility for all tenants for
the share if you need:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila update Share1 --description &quot;My first share. Updated&quot; --is-public False

$ manila show Share1
+-----------------------------+--------------------------------------------+
| Property                    | Value                                      |
+-----------------------------+--------------------------------------------+
| status                      | available                                  |
| share_type_name             | default                                    |
| description                 | My first share. Updated                    |
| availability_zone           | nova                                       |
| share_network_id            | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a       |
| export_locations            | 10.254.0.3:/shares/share-2d5e2c0a-1f84-... |
| share_server_id             | 41b7829d-7f6b-4c96-aea5-d106c2959961       |
| host                        | manila@generic1#GENERIC1                   |
| snapshot_id                 | None                                       |
| is_public                   | False                                      |
| task_state                  | None                                       |
| snapshot_support            | True                                       |
| id                          | aca648eb-8c03-4394-a5cc-755066b7eb66       |
| size                        | 1                                          |
| name                        | Share1                                     |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86       |
| created_at                  | 2015-09-24T12:19:06.000000                 |
| share_proto                 | NFS                                        |
| consistency_group_id        | None                                       |
| source_cgsnapshot_member_id | None                                       |
| project_id                  | 20787a7ba11946adad976463b57d8a2f           |
| metadata                    | {u&#39;aim&#39;: u&#39;testing&#39;}                       |
+-----------------------------+--------------------------------------------+
</pre></div>
</div>
</div>
<div class="section" id="share-metadata">
<h2>Share metadata<a class="headerlink" href="#share-metadata" title="Permalink to this headline">¶</a></h2>
<p>If you want to set the metadata on the share, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila metadata Share1 set project=my_abc deadline=01/20/16
</pre></div>
</div>
<p>Get all metadata key-value pairs of the share:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila metadata-show Share1
+----------+----------+
| Property | Value    |
+----------+----------+
| aim      | testing  |
| project  | my_abc   |
| deadline | 01/20/16 |
+----------+----------+
</pre></div>
</div>
<p>You can update the metadata:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila metadata-update-all Share1 deadline=01/30/16
+----------+----------+
| Property | Value    |
+----------+----------+
| deadline | 01/30/16 |
+----------+----------+
</pre></div>
</div>
<p>You also can unset the metadata using
<strong>manila metadata &lt;share_name&gt; unset &lt;metadata_key(s)&gt;</strong>.</p>
</div>
<div class="section" id="manage-snapshots">
<h2>Manage snapshots<a class="headerlink" href="#manage-snapshots" title="Permalink to this headline">¶</a></h2>
<p>Create a snapshot from the share.</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila snapshot-create Share1 --name Snapshot1 --description &quot;Snapshot of Share1&quot;
+-------------+--------------------------------------+
| Property    | Value                                |
+-------------+--------------------------------------+
| status      | creating                             |
| share_id    | aca648eb-8c03-4394-a5cc-755066b7eb66 |
| name        | Snapshot1                            |
| created_at  | 2015-09-25T05:27:38.862040           |
| share_proto | NFS                                  |
| id          | 962e8126-35c3-47bb-8c00-f0ee37f42ddd |
| size        | 1                                    |
| share_size  | 1                                    |
| description | Snapshot of Share1                   |
+-------------+--------------------------------------+
</pre></div>
</div>
<p>Update name or description of a snapshot if it is needed:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila snapshot-rename Snapshot1 Snapshot_1 --description &quot;Snapshot of Share1. Updated.&quot;
</pre></div>
</div>
<p>Check that status of a snapshot is <tt class="docutils literal"><span class="pre">available</span></tt>:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila snapshot-show Snapshot1
+-------------+--------------------------------------+
| Property    | Value                                |
+-------------+--------------------------------------+
| status      | available                            |
| share_id    | aca648eb-8c03-4394-a5cc-755066b7eb66 |
| name        | Snapshot1                            |
| created_at  | 2015-09-25T05:27:38.000000           |
| share_proto | NFS                                  |
| id          | 962e8126-35c3-47bb-8c00-f0ee37f42ddd |
| size        | 1                                    |
| share_size  | 1                                    |
| description | Snapshot of Share1                   |
+-------------+--------------------------------------+
</pre></div>
</div>
<p>Create a share from a snapshot and check whether it is available:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila create nfs 1 --name Share2 --metadata source=snapshot --description &quot;Share from a snapshot.&quot; --snapshot-id 962e8126-35c3-47bb-8c00-f0ee37f42ddd
+-----------------------------+--------------------------------------+
| Property                    | Value                                |
+-----------------------------+--------------------------------------+
| status                      | None                                 |
| share_type_name             | default                              |
| description                 | Share from a snapshot.               |
| availability_zone           | None                                 |
| share_network_id            | None                                 |
| export_locations            | []                                   |
| share_server_id             | None                                 |
| host                        | None                                 |
| snapshot_id                 | 962e8126-35c3-47bb-8c00-f0ee37f42ddd |
| is_public                   | False                                |
| task_state                  | None                                 |
| snapshot_support            | True                                 |
| id                          | b6b0617c-ea51-4450-848e-e7cff69238c7 |
| size                        | 1                                    |
| name                        | Share2                               |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86 |
| created_at                  | 2015-09-25T06:25:50.240417           |
| export_location             | None                                 |
| share_proto                 | NFS                                  |
| consistency_group_id        | None                                 |
| source_cgsnapshot_member_id | None                                 |
| project_id                  | 20787a7ba11946adad976463b57d8a2f     |
| metadata                    | {u&#39;source&#39;: u&#39;snapshot&#39;}             |
+-----------------------------+--------------------------------------+

$ manila show Share2
+-----------------------------+-------------------------------------------+
| Property                    | Value                                     |
+-----------------------------+-------------------------------------------+
| status                      | available                                 |
| share_type_name             | default                                   |
| description                 | Share from a snapshot.                    |
| availability_zone           | nova                                      |
| share_network_id            | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a      |
| export_locations            | 10.254.0.3:/shares/share-1dc2a471-3d47-...|
| share_server_id             | 41b7829d-7f6b-4c96-aea5-d106c2959961      |
| host                        | manila@generic1#GENERIC1                  |
| snapshot_id                 | 962e8126-35c3-47bb-8c00-f0ee37f42ddd      |
| is_public                   | False                                     |
| task_state                  | None                                      |
| snapshot_support            | True                                      |
| id                          | b6b0617c-ea51-4450-848e-e7cff69238c7      |
| size                        | 1                                         |
| name                        | Share2                                    |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86      |
| created_at                  | 2015-09-25T06:25:50.000000                |
| share_proto                 | NFS                                       |
| consistency_group_id        | None                                      |
| source_cgsnapshot_member_id | None                                      |
| project_id                  | 20787a7ba11946adad976463b57d8a2f          |
| metadata                    | {u&#39;source&#39;: u&#39;snapshot&#39;}                  |
+-----------------------------+-------------------------------------------+
</pre></div>
</div>
<p>You can soft-delete a snapshot using <strong>manila snapshot-delete
&lt;snapshot_name_or_ID&gt;</strong>. If a snapshot is in busy state and during deleting
got the <tt class="docutils literal"><span class="pre">error_deleting</span></tt> status, administrator can force-delete it or
explicitly reset the state.</p>
</div>
<div class="section" id="admin-actions-reset-state-and-force-delete">
<h2>Admin actions (reset state and force-delete)<a class="headerlink" href="#admin-actions-reset-state-and-force-delete" title="Permalink to this headline">¶</a></h2>
<p>As administrator, you can reset the state of a share, a share snapshot and
a share instance. You also can force-delete a share, share snapshot, a share
instance, a consistency group and a consistency group snapshot.
Aforesaid objects cannot be deleted in transitional states. The transitional
states are <tt class="docutils literal"><span class="pre">creating</span></tt>, <tt class="docutils literal"><span class="pre">deleting</span></tt> for all and aforesaid objects and
also <tt class="docutils literal"><span class="pre">managing</span></tt>, <tt class="docutils literal"><span class="pre">unmanaging</span></tt>, <tt class="docutils literal"><span class="pre">extending</span></tt>, and <tt class="docutils literal"><span class="pre">shrinking</span></tt> statuses
for the shares. Force-deletion deletes an object in any state. Use the
<tt class="file docutils literal"><span class="pre">/etc/manila/policy.json</span></tt> file to grant permissions for this action to
other roles.</p>
<p>Use <strong>manila reset-state [&#8211;state &lt;state&gt;] &lt;share&gt;</strong> command to reset share
state, where <tt class="docutils literal"><span class="pre">state</span></tt> indicates which state to assign the share. Options
include <tt class="docutils literal"><span class="pre">available</span></tt>, <tt class="docutils literal"><span class="pre">error</span></tt>, <tt class="docutils literal"><span class="pre">creating</span></tt>, <tt class="docutils literal"><span class="pre">deleting</span></tt>,
<tt class="docutils literal"><span class="pre">error_deleting</span></tt> states. If no state is provided, available will be used.</p>
<p>Let&#8217;s explicitly reset the state of the share to one if the transitional states
and print the information about the share:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila reset-state Share2 --state deleting

$ manila show Share2
+-----------------------------+-------------------------------------------+
| Property                    | Value                                     |
+-----------------------------+-------------------------------------------+
| status                      | deleting                                  |
| share_type_name             | default                                   |
| description                 | Share from a snapshot.                    |
| availability_zone           | nova                                      |
| share_network_id            | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a      |
| export_locations            | []                                        |
| share_server_id             | 41b7829d-7f6b-4c96-aea5-d106c2959961      |
| host                        | manila@generic1#GENERIC1                  |
| snapshot_id                 | 962e8126-35c3-47bb-8c00-f0ee37f42ddd      |
| is_public                   | False                                     |
| task_state                  | None                                      |
| snapshot_support            | True                                      |
| id                          | b6b0617c-ea51-4450-848e-e7cff69238c7      |
| size                        | 1                                         |
| name                        | Share2                                    |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86      |
| created_at                  | 2015-09-25T06:25:50.000000                |
| export_location             | 10.254.0.3:/shares/share-1dc2a471-3d47-...|
| share_proto                 | NFS                                       |
| consistency_group_id        | None                                      |
| source_cgsnapshot_member_id | None                                      |
| project_id                  | 20787a7ba11946adad976463b57d8a2f          |
| metadata                    | {u&#39;source&#39;: u&#39;snapshot&#39;}                  |
+-----------------------------+-------------------------------------------+
</pre></div>
</div>
<p>Try to delete the share using soft-deletion,
<strong>manila delete &lt;share_name_or_ID&gt;</strong>, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila delete b6b0617c-ea51-4450-848e-e7cff69238c7
Delete for share b6b0617c-ea51-4450-848e-e7cff69238c7 failed: Invalid share: Share status must be one of (&#39;available&#39;, &#39;error&#39;, &#39;inactive&#39;). (HTTP 403) (Request-ID: req-9a77b9a0-17d2-4d97-8a7a-b7e23c27f1fe)
ERROR: Unable to delete any of the specified shares.
</pre></div>
</div>
<p>A share cannot be deleted in a <tt class="docutils literal"><span class="pre">deleting</span></tt> status or any other transitional
status, so we got an error from <tt class="docutils literal"><span class="pre">python-manilaclient</span></tt>.</p>
<p>Let&#8217;s print the list of all shares for all tenants:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila list --all-tenants
+------+-------+-----+------------+----------+-----------+-------------+
| ID   | Name  | Size| Share Proto| Status   | Share Type| Host        |
+------+-------+-----+------------+----------+-----------+-------------+
| aca..| Share1| 1   | NFS        | available| c008658...| manila@gen..|
| b6b..| Share2| 1   | NFS        | deleting | c008658...| manila@gen..|
+------+-------+-----+------------+----------+-----------+-------------+
</pre></div>
</div>
<p>Let&#8217;s force-delete Share2 and check that it is absent in the list of shares,
run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila force-delete b6b0617c-ea51-4450-848e-e7cff69238c7

$ manila list
+------+-------+-----+------------+----------+-----------+-------------+
| ID   | Name  | Size| Share Proto| Status   | Share Type| Host        |
+------+-------+-----+------------+----------+-----------+-------------+
| aca..| Share1| 1   | NFS        | available| c008658...| manila@gen..|
+------+-------+-----+------------+----------+-----------+-------------+
</pre></div>
</div>
<p>The same actions can be performed with share snapshots, share instances,
consistency groups and consistency group snapshots.</p>
</div>
<div class="section" id="manage-access-to-share">
<h2>Manage access to share<a class="headerlink" href="#manage-access-to-share" title="Permalink to this headline">¶</a></h2>
<p>The Shared File Systems Storage Service allows to grant or deny access to
a specified share, and list the permissions for a specified share.</p>
<p>To grant or deny access to a share, specify one of these supported share
access levels:</p>
<ul class="simple">
<li><strong>rw</strong>. Read and write (RW) access.</li>
<li><strong>ro</strong>. Read-only (RO) access.</li>
</ul>
<p>You must also specify one of these supported authentication methods:</p>
<ul class="simple">
<li><strong>ip</strong>. Authenticates an instance through its IP address. A valid
format is <tt class="docutils literal"><span class="pre">XX.XX.XX.XX</span></tt> or <tt class="docutils literal"><span class="pre">XX.XX.XX.XX/XX</span></tt>. For example <tt class="docutils literal"><span class="pre">0.0.0.0/0</span></tt>.</li>
<li><strong>cert</strong>. Authenticates an instance through a TLS certificate. Specify the
TLS identity as the IDENTKEY. A valid value is any string up to 64 characters
long in the common name (CN) of the certificate. The meaning of a string
depends on its interpretation.</li>
<li><strong>user</strong>. Authenticates by a specified user or group name. A valid value is
an alphanumeric string that can contain some special characters and is from
4 to 32 characters long.</li>
</ul>
<p>Allow access to the share with <tt class="docutils literal"><span class="pre">ip</span></tt> access type:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila access-allow Share1 ip 172.20.19.4 --access-level ro
+-------------------+------------------------------------------------------+
| Property          | Value                                                |
+-------------------+------------------------------------------------------+
| share_id          | aca648eb-8c03-4394-a5cc-755066b7eb66                 |
| deleted           | False                                                |
| created_at        | 2015-09-25T08:28:38.000000                           |
| updated_at        | None                                                 |
| access_type       | ip                                                   |
| access_to         | 172.20.19.4                                          |
| access_level      | ro                                                   |
| instance_mappings | [{u&#39;state&#39;: u&#39;new&#39;, u&#39;share_instance_id&#39;: u&#39;2d5e2c...|
| id                | 3b08abc0-7de7-4a87-99e2-46bd17eaaa35                 |
+-------------------+------------------------------------------------------+
</pre></div>
</div>
<p>Allow access to the share with <tt class="docutils literal"><span class="pre">user</span></tt> access type:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila access-allow Share1 user demo --access-level rw
+-------------------+------------------------------------------------------+
| Property          | Value                                                |
+-------------------+------------------------------------------------------+
| share_id          | aca648eb-8c03-4394-a5cc-755066b7eb66                 |
| deleted           | False                                                |
| created_at        | 2015-09-25T08:36:07.000000                           |
| updated_at        | None                                                 |
| access_type       | user                                                 |
| access_to         | demo                                                 |
| access_level      | rw                                                   |
| instance_mappings | [{u&#39;state&#39;: u&#39;new&#39;, u&#39;share_instance_id&#39;: u&#39;2d5e2c...|
| id                | 233b8ca5-f0ed-4200-ac0c-afb14a94a51e                 |
+-------------------+------------------------------------------------------+
</pre></div>
</div>
<p>Note that different share features are supported by different share drivers.
For the example hereinabove we used the Generic (Cinder as back-end) driver
that doesn&#8217;t support <tt class="docutils literal"><span class="pre">user</span></tt> and <tt class="docutils literal"><span class="pre">cert</span></tt> authentications methods. For details
of supporting of features by different drivers, see <a class="reference external" href="http://docs.openstack.org/developer/manila/devref/share_back_ends_feature_support_mapping.html">Manila share features
support mapping</a>.</p>
<p>To verify that the access rules (ACL) were configured correctly for a share,
you list permissions for a share:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila access-list Share1
+-------------+-------------+---------------+--------------+--------+
| id          | access type | access to     | access level | state  |
+-------------+-------------+---------------+--------------+--------+
| 233b8ca5-...| user        | demo          | rw           | error  |
| 3b08abc0-...| ip          | 172.18.196.45 | rw           | active |
+-------------+-------------+---------------+--------------+--------+
</pre></div>
</div>
<p>Deny access to the share and check that deleted access rule is absent in the
access rule list:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila access-deny Share1 3b08abc0-7de7-4a87-99e2-46bd17eaaa35

$ manila access-list Share1
+-------------+-------------+-----------+--------------+-------+
| id          | access type | access to | access level | state |
+-------------+-------------+-----------+--------------+-------+
| 233b8ca5-...| user        | demo      | rw           | error |
+-------------+-------------+-----------+--------------+-------+
</pre></div>
</div>
</div>
<div class="section" id="resize-share">
<h2>Resize share<a class="headerlink" href="#resize-share" title="Permalink to this headline">¶</a></h2>
<p>You can extend and shrink the share with <strong>extend</strong> and <strong>shrink</strong> commands
correspondingly and specifying the share and new size that doesn&#8217;t exceed the
quota. For details, see Quotas and Limits section. You also cannot shrink size
to 0 or to a greater value than the current share size.</p>
<p>While extending the share gets <tt class="docutils literal"><span class="pre">extending</span></tt> status that means that the
increase share size request was issued successfully.</p>
<p>To extend the share and check the result, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila extend Share1 2
$ manila show Share1
+-----------------------------+-------------------------------------------+
| Property                    | Value                                     |
+-----------------------------+-------------------------------------------+
| status                      | available                                 |
| share_type_name             | default                                   |
| description                 | My first share. Updated                   |
| availability_zone           | nova                                      |
| share_network_id            | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a      |
| export_locations            | 10.254.0.3:/shares/share-2d5e2c0a-1f84-...|
| share_server_id             | 41b7829d-7f6b-4c96-aea5-d106c2959961      |
| host                        | manila@generic1#GENERIC1                  |
| snapshot_id                 | None                                      |
| is_public                   | False                                     |
| task_state                  | None                                      |
| snapshot_support            | True                                      |
| id                          | aca648eb-8c03-4394-a5cc-755066b7eb66      |
| size                        | 2                                         |
| name                        | Share1                                    |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86      |
| created_at                  | 2015-09-24T12:19:06.000000                |
| share_proto                 | NFS                                       |
| consistency_group_id        | None                                      |
| source_cgsnapshot_member_id | None                                      |
| project_id                  | 20787a7ba11946adad976463b57d8a2f          |
| metadata                    | {u&#39;deadline&#39;: u&#39;01/30/16&#39;}                |
+-----------------------------+-------------------------------------------+
</pre></div>
</div>
<p>While extending the share gets <tt class="docutils literal"><span class="pre">shrinking</span></tt> status that means that the
decrease share size request was issued successfully. To shrink the share and
check the result, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila shrink Share1 1
$ manila show Share1
+-----------------------------+-------------------------------------------+
| Property                    | Value                                     |
+-----------------------------+-------------------------------------------+
| status                      | available                                 |
| share_type_name             | default                                   |
| description                 | My first share. Updated                   |
| availability_zone           | nova                                      |
| share_network_id            | 5c3cbabb-f4da-465f-bc7f-fadbe047b85a      |
| export_locations            | 10.254.0.3:/shares/share-2d5e2c0a-1f84-...|
| share_server_id             | 41b7829d-7f6b-4c96-aea5-d106c2959961      |
| host                        | manila@generic1#GENERIC1                  |
| snapshot_id                 | None                                      |
| is_public                   | False                                     |
| task_state                  | None                                      |
| snapshot_support            | True                                      |
| id                          | aca648eb-8c03-4394-a5cc-755066b7eb66      |
| size                        | 1                                         |
| name                        | Share1                                    |
| share_type                  | c0086582-30a6-4060-b096-a42ec9d66b86      |
| created_at                  | 2015-09-24T12:19:06.000000                |
| share_proto                 | NFS                                       |
| consistency_group_id        | None                                      |
| source_cgsnapshot_member_id | None                                      |
| project_id                  | 20787a7ba11946adad976463b57d8a2f          |
| metadata                    | {u&#39;deadline&#39;: u&#39;01/30/16&#39;}                |
+-----------------------------+-------------------------------------------+
</pre></div>
</div>
</div>
<div class="section" id="security-services-for-networking">
<h2>Security services for networking<a class="headerlink" href="#security-services-for-networking" title="Permalink to this headline">¶</a></h2>
<p>You can create, update, view, and delete a security service. A security service
stores configuration information for clients for authentication and
authorization (AuthN/AuthZ). For example, a share server will be the client for
an existing service such as LDAP, Kerberos, or Microsoft Active Directory.</p>
<p>You can associate a share with from one to three security service types:</p>
<ul class="simple">
<li>ldap. LDAP.</li>
<li>kerberos. Kerberos.</li>
<li>active_directory. Microsoft Active Directory.</li>
</ul>
<p>You can configure a security service with these options:</p>
<ul class="simple">
<li>A DNS IP address.</li>
<li>An IP address or host name.</li>
<li>A domain.</li>
<li>A user or group name.</li>
<li>The password for the user, if you specify a user name.</li>
</ul>
<p>The security service can be added to the share network.</p>
<p>To create a security service, specify the security service type and optionally
name, description of a security service, DNS IP address used inside tenant&#8217;s
network, security service IP address or hostname, domain, security service user
or group used by tenant, a password of user.</p>
<p>Create a <tt class="docutils literal"><span class="pre">ldap</span></tt> security service:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila security-service-create ldap --dns-ip 8.8.8.8 --server 10.254.0.3 --name my_ldap_security_service
+-------------+--------------------------------------+
| Property    | Value                                |
+-------------+--------------------------------------+
| status      | new                                  |
| domain      | None                                 |
| password    | None                                 |
| name        | my_ldap_security_service             |
| dns_ip      | 8.8.8.8                              |
| created_at  | 2015-09-25T10:19:06.019527           |
| updated_at  | None                                 |
| server      | 10.254.0.3                           |
| user        | None                                 |
| project_id  | 20787a7ba11946adad976463b57d8a2f     |
| type        | ldap                                 |
| id          | 413479b2-0d20-4c58-a9d3-b129fa592d8e |
| description | None                                 |
+-------------+--------------------------------------+
</pre></div>
</div>
<p>To create <tt class="docutils literal"><span class="pre">kerberos</span></tt> security service, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila security-service-create kerberos --server 10.254.0.3 --user demo --password secret --name my_kerberos_security_service --description &quot;Kerberos security service&quot;
+-------------+--------------------------------------+
| Property    | Value                                |
+-------------+--------------------------------------+
| status      | new                                  |
| domain      | None                                 |
| password    | secret                               |
| name        | my_kerberos_security_service         |
| dns_ip      | None                                 |
| created_at  | 2015-09-25T10:26:03.211849           |
| updated_at  | None                                 |
| server      | 10.254.0.3                           |
| user        | demo                                 |
| project_id  | 20787a7ba11946adad976463b57d8a2f     |
| type        | kerberos                             |
| id          | 7f46a447-2534-453d-924d-bd7c8e63bbec |
| description | Kerberos security service            |
+-------------+--------------------------------------+
</pre></div>
</div>
<p>To see the list of created security service use
<strong>manila security-service-list</strong>:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila security-service-list
+-------------+------------------------------+--------+----------+
| id          | name                         | status | type     |
+-------------+------------------------------+--------+----------+
| 413479b2-...| my_ldap_security_service     | new    | ldap     |
| 7f46a447-...| my_kerberos_security_service | new    | kerberos |
+-------------+------------------------------+--------+----------+
</pre></div>
</div>
<p>You can add a security service to the existing share network that is not
used yet (don&#8217;t associated with a share).</p>
<p>Add a security service to the share network with
<strong>share-network-security-service-add</strong> specifying share network, security
service and print the information about the security service. You can see
new attribute <tt class="docutils literal"><span class="pre">share_networks</span></tt> with associated share network ID.</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila share-network-security-service-add share_net2 my_ldap_security_service

$ manila security-service-show my_ldap_security_service
+----------------+-------------------------------------------+
| Property       | Value                                     |
+----------------+-------------------------------------------+
| status         | new                                       |
| domain         | None                                      |
| password       | None                                      |
| name           | my_ldap_security_service                  |
| dns_ip         | 8.8.8.8                                   |
| created_at     | 2015-09-25T10:19:06.000000                |
| updated_at     | None                                      |
| server         | 10.254.0.3                                |
| share_networks | [u&#39;6d36c41f-d310-4aff-a0c2-ffd870e91cab&#39;] |
| user           | None                                      |
| project_id     | 20787a7ba11946adad976463b57d8a2f          |
| type           | ldap                                      |
| id             | 413479b2-0d20-4c58-a9d3-b129fa592d8e      |
| description    | None                                      |
+----------------+-------------------------------------------+
</pre></div>
</div>
<p>It is possible to see the list of security services associated with
given share network. List security services for <tt class="docutils literal"><span class="pre">share_net2</span></tt> share network:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila share-network-security-service-list share_net2
+-------------+--------------------------+--------+------+
| id          | name                     | status | type |
+-------------+--------------------------+--------+------+
| 413479b2-...| my_ldap_security_service | new    | ldap |
+-------------+--------------------------+--------+------+
</pre></div>
</div>
<p>You also can dissociate a security service from the share network
and see that a security service now has empty list of share networks:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila share-network-security-service-remove share_net2 my_ldap_security_service

$ manila security-service-show my_ldap_security_service
+----------------+--------------------------------------+
| Property       | Value                                |
+----------------+--------------------------------------+
| status         | new                                  |
| domain         | None                                 |
| password       | None                                 |
| name           | my_ldap_security_service             |
| dns_ip         | 8.8.8.8                              |
| created_at     | 2015-09-25T10:19:06.000000           |
| updated_at     | None                                 |
| server         | 10.254.0.3                           |
| share_networks | []                                   |
| user           | None                                 |
| project_id     | 20787a7ba11946adad976463b57d8a2f     |
| type           | ldap                                 |
| id             | 413479b2-0d20-4c58-a9d3-b129fa592d8e |
| description    | None                                 |
+----------------+--------------------------------------+
</pre></div>
</div>
<p>Shared File Systems Storage allows you to update a security service fields
using <strong>manila security-service-update</strong> command with optional arguments
such as <tt class="docutils literal"><span class="pre">--dns-ip</span></tt>, <tt class="docutils literal"><span class="pre">--server</span></tt>, <tt class="docutils literal"><span class="pre">--domain</span></tt>, <tt class="docutils literal"><span class="pre">--user</span></tt>, <tt class="docutils literal"><span class="pre">--password</span></tt>,
<tt class="docutils literal"><span class="pre">--name</span></tt>, or <tt class="docutils literal"><span class="pre">--description</span></tt>.</p>
<p>To remove a security service, that is not assosiated with any share networks,
run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila security-service-delete my_ldap_security_service
</pre></div>
</div>
</div>
<div class="section" id="limits-and-quotas">
<h2>Limits and Quotas<a class="headerlink" href="#limits-and-quotas" title="Permalink to this headline">¶</a></h2>
<p>Limits are the resource limitations that are allowed for each tenant (project).
An administrator can configure limits in the <tt class="file docutils literal"><span class="pre">manila.conf</span></tt> file.</p>
<p>Users can query their rate and absolute limits.
The absolute limits contain information about:</p>
<ul class="simple">
<li>Total maximum share memory, in GBs.</li>
<li>Number of share-networks.</li>
<li>Number of share-snapshots.</li>
<li>Number of shares.</li>
<li>Shares and total used memory, in GBs.</li>
</ul>
<p>Rate limits control the frequency at which users can issue specific API
requests. Administrators use rate limiting to configure limits on the type and
number of API calls that can be made in a specific time interval. For example,
a rate limit can control the number of GET requests that can be processed
during a one-minute period.</p>
<p>To see the absolute limits, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila absolute-limits
+----------------------------+-------+
| Name                       | Value |
+----------------------------+-------+
| maxTotalShareGigabytes     | 1000  |
| maxTotalShareNetworks      | 10    |
| maxTotalShareSnapshots     | 50    |
| maxTotalShares             | 50    |
| maxTotalSnapshotGigabytes  | 1000  |
| totalShareGigabytesUsed    | 1     |
| totalShareNetworksUsed     | 2     |
| totalShareSnapshotsUsed    | 1     |
| totalSharesUsed            | 1     |
| totalSnapshotGigabytesUsed | 1     |
+----------------------------+-------+
</pre></div>
</div>
<p>To see the rate limits, run:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila rate-limits
</pre></div>
</div>
<p>Quota sets extensions (os-quota-sets) provide quotas management support.</p>
<p>To list the quotas for a tenant or user, use <strong>manila quota-show</strong> command.
If you specify the optional <tt class="docutils literal"><span class="pre">--user</span></tt> parameter, you get the quotas for this
user in the specified tenant. If you omit this parameter, you get the quotas
for the specified project.</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila quota-show --tenant demo --user demo
+--------------------+-------+
| Property           | Value |
+--------------------+-------+
| gigabytes          | 1000  |
| snapshot_gigabytes | 1000  |
| snapshots          | 50    |
| shares             | 50    |
| share_networks     | 10    |
+--------------------+-------+
</pre></div>
</div>
<p>There are default quotas for a project that are set from <tt class="file docutils literal"><span class="pre">manila.conf</span></tt>
file. To list default quotas for a project, use <strong>manila quota-defaults</strong>
command:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila quota-defaults --tenant demo
+--------------------+-------+
| Property           | Value |
+--------------------+-------+
| gigabytes          | 1000  |
| snapshot_gigabytes | 1000  |
| snapshots          | 50    |
| shares             | 50    |
| share_networks     | 10    |
+--------------------+-------+
</pre></div>
</div>
<p>Administrator can update the quotas for a specified tenant or for a specified
user by providing both <tt class="docutils literal"><span class="pre">--tenant</span></tt> and <tt class="docutils literal"><span class="pre">--user</span></tt> optional arguments.
It is possible to update <tt class="docutils literal"><span class="pre">snapshots</span></tt>, <tt class="docutils literal"><span class="pre">gigabytes</span></tt>, <tt class="docutils literal"><span class="pre">snapshot-gigabytes</span></tt>,
and <tt class="docutils literal"><span class="pre">share-networks</span></tt> quotas.</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila quota-update demo --user demo --shares 49 --snapshots 49
</pre></div>
</div>
<p>As administrator, you can also permit or deny the force-update of a quota that
is already used and the requested value exceeds the configured quota. To
force-update a quota, use <tt class="docutils literal"><span class="pre">force</span></tt> optional key.</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila quota-update demo --shares 51 --snapshots 51 --force
</pre></div>
</div>
<p>To revert quotas to default for a project or for a user, delete quotas:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila quota-delete --tenant demo --user demo
</pre></div>
</div>
<p>It is possible to set quotas for a quota class and then check that the quotas
were updated:</p>
<div class="code console highlight-python"><div class="highlight"><pre>$ manila quota-class-update my_custom_class --shares 49 --snapshot_gigabytes 999

$ manila quota-class-show my_custom_class
+--------------------+-------+
| Property           | Value |
+--------------------+-------+
| gigabytes          | 1000  |
| snapshot_gigabytes | 999   |
| snapshots          | 50    |
| shares             | 49    |
| share_networks     | 10    |
+--------------------+-------+
</pre></div>
</div>
</div>
</div>


              </div>
          </div>
          </div>
          <!-- <div class="docs-tags">
                <a href="#" class="docs-tag">Network Time Protocol (NTP)</a>
                <a href="#" class="docs-tag">Security</a>
                <a href="#" class="docs-tag">Conceptual architecture</a>
            </div> -->
<div class="docs-actions">
                  
                  <a href="file_shares_troubleshoot.html"><i class="fa fa-angle-double-left" data-toggle="tooltip" data-placement="top" title="Previous: Troubleshoot your installation"></i></a>
                  
                  
                  <a href="networking.html"><i class="fa fa-angle-double-right" data-toggle="tooltip" data-placement="top" title="Next: Networking"></i></a>
                  
                  <a id="logABugLink3" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="fa fa-bug" data-toggle="tooltip" data-placement="top" title="Report a Bug"></i></a>
                </div>
                <div class="row docs-byline bottom">
                <div class="docs-updated">
                updated: 2015-09-28 17:24 | release: 0.9
                </div>
                <a href="http://git.openstack.org/" class="docs-edit">
                    <i class="fa fa-pencil"></i> suggest edits
                </a>
</div>
    <div class="row">
         <div class="col-lg-8 col-md-8 col-sm-8 docs-license">
           <img src="_static/images/docs/license.png" alt="Creative Commons Attribution 3.0 License"/>
<p>
 Except where otherwise noted, this document is licensed under Creative Commons
 Attribution 3.0 License
 <a href="#">http://creativecommons.org/licenses/by/3.0/legalcode</a>.
</p>
<p>
 <a href="http://www.openstack.org/legal">See All Legal Notices</a>
</p>
         </div>
         <div class="col-lg-4 col-md-4 col-sm-4 docs-actions-wrapper">
                    <!-- ID buglinkbottom added so that pre-filled doc bugs
                    are sent to Launchpad projects related to the document -->
                    <a href="#" id="logABugLink2" class="docs-footer-actions">
                        <i class="fa fa-bug"></i>found an error? report a bug
                    </a>
                    <a href="http://ask.openstack.org" class="docs-footer-actions">
                        <i class="fa fa-question-circle"></i>questions? <a href="http://ask.openstack.org/">ask.openstack.org</a>
                    </a>
                </div>
     </div>
     </div>
            <!-- Docs Sidebar -->
                <div class="col-lg-3 col-md-4 col-sm-4 col-lg-pull-9 col-md-pull-8 col-sm-pull-8 docs-sidebar">
            <div class="search-icon show"><i class="fa fa-search"></i>
Search</div>
            <div class="btn-group docs-sidebar-releases">
                <button onclick="location.href='/'" class="btn docs-sidebar-home" data-toggle="tooltip" data-placement="top" title="Docs Home"><i class="fa fa-arrow-circle-o-left"></i></button>
                <button href="#" type="button" data-toggle="dropdown" class="btn docs-sidebar-release-select">Release: Kilo (April 2015)<i class="fa fa-caret-down"></i></button>
                <ul class="dropdown-menu docs-sidebar-dropdown" role="menu" aria-labelledby="dLabel">
                    <li role="presentation" class="dropdown-header">Releases</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/kilo/">Kilo (current release)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/juno/">Juno (October 2014)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/icehouse/">Icehouse (May 2014)</a></li>
                    <li role="presentation" class="dropdown-header">Languages</li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ja/">日本語 (Japanese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/de/">Deutsch (German)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/fr/">Français (French)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/pt_BR/">Português (Portuguese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/zh_CN/">简体中文 (Simplified Chinese)</a></li>
                    <li role="presentation"><a role="menuitem" tabindex="-1" href="/ko_KR/">한국어 (Korean)</a></li>
                </ul>
            </div>
                <div class="docs-sidebar-toc">
                    <div class="docs-sidebar-section" id="install-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#install-guides"><h4>Install Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="user-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#user-guides"><h4>User Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="configuration-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#configuration-guides"><h4>Configuration Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="operations-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/openstack-ops/content/"><h4>Operations Guide</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="api-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#api-guides"><h4>API Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="contributor-guides">
                        <a class="docs-sidebar-section-title" href="http://docs.openstack.org/index.html#contributor-guides"><h4>Contributor Guides</h4></a>
                    </div>
                    <div class="docs-sidebar-section" id="table-of-contents">
                        <a class="docs-sidebar-section-title"><h4>Contents</h4></a>
                        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="common/conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/get_started_with_openstack.html">Get started with OpenStack</a></li>
<li class="toctree-l1"><a class="reference internal" href="identity_management.html">Identity management</a></li>
<li class="toctree-l1"><a class="reference internal" href="dashboard.html">Dashboard</a></li>
<li class="toctree-l1"><a class="reference internal" href="compute.html">Compute</a></li>
<li class="toctree-l1"><a class="reference internal" href="objectstorage.html">Object Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="blockstorage.html">Block Storage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="file_shares.html">File Share</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="file_shares_intro.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_shares_manage_shares.html">Manage shares</a></li>
<li class="toctree-l2"><a class="reference internal" href="file_shares_troubleshoot.html">Troubleshoot your installation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">SAMPLES</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="networking.html">Networking</a></li>
<li class="toctree-l1"><a class="reference internal" href="telemetry.html">Telemetry</a></li>
<li class="toctree-l1"><a class="reference internal" href="database.html">Database</a></li>
<li class="toctree-l1"><a class="reference internal" href="orchestration.html">Orchestration</a></li>
<li class="toctree-l1"><a class="reference internal" href="cross_project.html">Cross-project features</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/app_support.html">Community support</a></li>
<li class="toctree-l1"><a class="reference internal" href="common/glossary.html">Glossary</a></li>
</ul>

                    </div>
                </div>
                </div>

</div>
</div>
    <!-- End Page Content -->

    <!-- Footer -->
    <!-- Footer -->
        <footer>
        <div class="container">
            <div class="row footer-links">
                <div class="col-lg-2 col-sm-2">
                    <h3>OpenStack</h3>
                    <ul>
                        <li><a href="/foundation">About the Foundation</a></li>
                        <li><a
href="http://openstack.org/projects/">Projects</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-security/">OpenStack
Security</a></li>
                        <li><a
href="http://openstack.org/projects/openstack-faq/">Common Questions</a></li>
                        <li><a href="http://openstack.org/blog/">Blog</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Community</h3>
                    <ul>
                        <li><a href="http://openstack.org/community/">User
Groups</a></li>
                        <li><a
href="http://openstack.org/community/events/">Events</a></li>
                        <li><a
href="http://openstack.org/community/jobs/">Jobs</a></li>
                        <li><a
href="http://openstack.org/foundation/companies/">Companies</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute">Contribute</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Documentation</h3>
                    <ul>
                        <li><a href="http://docs.openstack.org">OpenStack
Manuals</a></li>
                        <li><a
href="http://openstack.org/software/start/">Getting Started</a></li>
                        <li><a href="http://developer.openstack.org">API
Documentation</a></li>
                        <li><a href="https://wiki.openstack.org">Wiki</a></li>
                    </ul>
                </div>
                <div class="col-lg-2 col-sm-2">
                    <h3>Branding & Legal</h3>
                    <ul>
                        <li><a href="http://openstack.org/brand/">Logos &
Guidelines</a></li>
                        <li><a
href="http://openstack.org/brand/openstack-trademark-policy/">Trademark
Policy</a></li>
                        <li><a href="http://openstack.org/privacy/">Privacy
Policy</a></li>
                        <li><a
href="https://wiki.openstack.org/wiki/How_To_Contribute#Contributors_License_Agreement">OpenStack
CLA</a></li>
                    </ul>
                </div>
                <div class="col-lg-4 col-sm-4">
                    <h3>Stay In Touch</h3>
                    <a href="https://twitter.com/OpenStack" target="_blank"
class="social-icons footer-twitter"></a>
                    <a href="https://www.facebook.com/openstack"
target="_blank" class="social-icons footer-facebook"></a>
                    <a href="https://www.linkedin.com/company/openstack"
target="_blank" class="social-icons footer-linkedin"></a>
                    <a href="https://www.youtube.com/user/OpenStackFoundation"
target="_blank" class="social-icons footer-youtube"></a>
                    <!-- <form class="form-inline">
                        <div class="form-group newsletter-form">
                            <label>Join Our Newsletter</label>
                            <input class="newsletter-input" type="input"
placeholder="Email">
                            <button type="submit"
class="newsletter-btn">Join</button>
                        </div>
                    </form> -->
                    <p class="fine-print">
                        The OpenStack project is provided under the Apache 2.0
license. Openstack.org is powered by <a href="http://rackspace.com"
target="_blank">Rackspace Cloud Computing</a>.
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <div class="footer-bottom">
        <div class="container">
            <form class="form-inline" id="FeedbackForm_FeedbackForm" action="/home/FeedbackForm" method="post" enctype="application/x-www-form-urlencoded">
              <div class="form-group">
                <div>
                  <input class="feedback-input" type="input" placeholder="Give Us Your Feedback On This Page">
                  <button type="submit" class="feedback-btn">Submit</button>
                </div>
              </div>
            </form>
        </div>
    </div>

<!-- Scripts in: static directory-->
    <!-- jQuery Version 1.11.0 -->
    <script type="text/javascript" src="_static/js/jquery-1.11.3.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script type="text/javascript" src="_static/js/bootstrap.min.js"></script>

    <!-- The rest of the JS -->
    <script type="text/javascript" src="_static/js/navigation.js"></script>

    <!-- Docs JS -->
    <script type="text/javascript" src="_static/js/docs.js"></script>

    <!-- Popovers -->
    <script type="text/javascript" src="_static/js/webui-popover.js"></script>

    <!-- Javascript for page -->
    <script language="JavaScript">
    /* build a description of this page including SHA, source location on git repo and
       build time, the project's launchpad bug tag and set the HREF of the bug buttons */

        var lineFeed = "%0A";

            /* "pagename" is the path to the source file, relative to conf.py's
               directory. However, "pagename" is missing the rst extension. */
            var sourceFile = "file_shares_samples" + ".rst"

            /* Using the current working directory, figure out
               in which book we are and use that information to
               build a link to the source file on git.openstack.ort */
            var pwd = "/home/izadorozhna/openstack-manuals/doc/admin-guide-cloud/source"
            var gitlink = "Source: http://git.openstack.org/cgit/openstack/openstack-manuals/tree"
            gitlink += pwd.slice(pwd.lastIndexOf("/doc/")) + "/" + sourceFile

        /* gitsha, project and bug_tag rely on variables in conf.py */
        var gitSha = "SHA: c9336a64baad95c110b3931345a1933f30e5e2a7"
        var bugTitle = "SAMPLES in Cloud Administrator Guide"
        var fieldTags = "admin-guide-cloud"

        /* "last_updated" is the build date and time. It relies on the
           conf.py variable "html_last_updated_fmt", which should include
           year/month/day as well as hours and minutes                   */
        var buildstring = "Release: 0.9 on 2015-09-28 17:24"

        var fieldComment = encodeURI(buildstring) +
                           lineFeed + encodeURI(gitSha) +
                           lineFeed + encodeURI(gitlink)

        logABug(bugTitle, fieldComment, fieldTags)
    </script>
    <!-- Javascript for search boxes (both sidebar and top nav) -->
<script type="text/javascript">
        (function() {
        var cx = '000108871792296872333:noj9nikm74i';
        var gcse = document.createElement('script');
        gcse.type = 'text/javascript';
        gcse.async = true;
        gcse.src = (document.location.protocol == 'https:' ? 'https:' :
'http:') +
            '//www.google.com/cse/cse.js?cx=' + cx;
        var s = document.getElementsByTagName('script')[0];
        s.parentNode.insertBefore(gcse, s);
      })();
       </script>

 </body>
</html>